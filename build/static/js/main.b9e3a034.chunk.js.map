{"version":3,"sources":["AuthContext.js","utils/constants.js","utils/index.js","utils/update.js","components/PollToggle/index.js","components/Admin/SetUserPermissionsDialog.js","components/Admin/UserRemoveDialog.js","components/Admin/index.js","components/Search/SearchBar.js","components/NotificationList.js","components/Layout/Header.js","components/Layout/SideMenu.js","components/Layout/Body.js","components/Layout/index.js","utils/token.js","components/ProfileList.js","components/Channel/AddChannelDialog.js","components/ChannelList.js","components/Dm/AddDmDialog.js","components/DmList.js","components/ProfileChannelLists.js","components/WorkspaceStats.js","pages/HomePage.js","components/Channel/AddMemberDialog.js","components/Message/AddMessageTimerDialog.js","components/Message/AddMessage.js","components/Dm/DmMessages.js","components/Message/MessagePin.js","components/Message/MessageReact.js","components/Message/MessageRemove.js","components/Message/MessageEdit.js","components/Message/MessageShareDialog.js","components/Message/index.js","components/Channel/ChannelMessages.js","components/Placeholder.js","components/Channel/index.js","pages/ChannelPage.js","components/Dm/index.js","pages/DmPage.js","pages/LoginPage.js","pages/RegisterPage.js","pages/ForgotPasswordPage.js","pages/ResetPasswordPage.js","components/Profile/EditableFields.js","components/Profile/UserStats.js","components/Profile/index.js","pages/ProfilePage.js","components/Search/index.js","pages/SearchPage.js","components/Layout/ProtectedRoute.js","axios.js","utils/text.js","App.js","serviceWorker.js","theme.js","index.js"],"names":["AuthContext","React","createContext","AuthProvider","Provider","Consumer","require","config","port","deployedUrl","undefined","window","BACKEND_PORT","DEPLOYED_URL","process","REACT_APP_BACKEND_PORT","url","console","log","PERMISSION_IDS","useInterval","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","isMatchingId","a","b","parseInt","stepSubscribers","subscribeToStep","subscriber","interval","find","o","push","unsubscribeToStep","unsubscriber","filter","step","iter","forEach","useStep","watches","shouldSubscribe","isPolling","count","options","PollToggle","useState","open","setOpen","anchorRef","selectedIndex","setSelectedIndex","handleMenuItemClick","event","index","handleClose","contains","target","ButtonGroup","variant","color","ref","aria-label","style","marginRight","Button","onClick","disabled","size","aria-owns","aria-haspopup","prevOpen","Popper","anchorEl","transition","disablePortal","TransitionProps","placement","Grow","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","map","option","MenuItem","key","selected","SetUserPermissionsDialog","children","permissionId","setPermissionId","users","setUsers","selectedUser","setSelectedUser","token","useContext","axios","get","params","then","data","catch","err","Dialog","onClose","aria-labelledby","DialogTitle","onSubmit","preventDefault","value","uId","post","Number","response","DialogContent","DialogContentText","Grid","container","spacing","direction","justify","alignItems","item","xs","Select","width","onChange","newUserId","d","idx","nameFirst","nameLast","RadioGroup","name","newPermissionId","row","FormControlLabel","control","Radio","label","labelPlacement","DialogActions","type","UserRemoveDialog","delete","Admin","buttonRef","aria-controls","keepMounted","useStyles","makeStyles","theme","search","position","borderRadius","shape","backgroundColor","fade","palette","common","white","marginLeft","breakpoints","up","searchIcon","height","pointerEvents","display","justifyContent","inputRoot","inputInput","padding","transitions","create","withRouter","props","classes","queryStr","setQueryStr","history","className","InputBase","placeholder","root","input","inputProps","e","NotificationList","notifs","length","notif","dmId","component","Link","to","channelId","notificationMessage","appBar","menuButton","title","flexGrow","logoutButton","float","Header","handleMenuToggle","useTheme","matches","useMediaQuery","loggedOut","setLoggedOut","localStorage","removeItem","AppBar","Toolbar","IconButton","edge","textDecoration","Typography","noWrap","drawer","flexShrink","drawerPaper","toolbar","mixins","paddingLeft","SideMenu","Hidden","smUp","implementation","Drawer","anchor","paper","ModalProps","Divider","xsDown","body","Body","Layout","menu","extractUId","getItem","ProfileList","uid","List","ListItem","button","ListItemIcon","ListItemText","primary","AddChannelDialog","isPublic","checked","TextField","autoFocus","margin","fullWidth","Switch","ChannelList","currChannelId","myChannels","setMyChannels","allChannels","setAllChannels","fetchChannelsData","getMyChannels","getAllChannels","all","spread","myChannelResponse","allChannelResponse","myChannelData","channels","filteredChannels","channel","c","subheader","ListSubheader","flex","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","AddDmDialog","selectedUsers","setSelectedUsers","uIds","multiple","Input","DmList","currDmId","myDms","setMyDms","fetchDmsData","ProfileChannelLists","WorkspaceStats","utilizationRate","channelsData","dmsData","messagesData","toFixed","datasets","fill","borderColor","showLine","scales","xAxes","gridLines","lineWidth","time","unitStepSize","displayFormats","millisecond","second","minute","hour","day","week","month","quarter","year","HomePage","paddingTop","AddMemberDialog","AddMessageTimerDialog","onTimerChange","Date","selectedDate","setSelectedDate","toDate","KeyboardButtonProps","flexDirection","alignSelf","rightIcon","standupTimer","AddMessage","currentMessage","setCurrentMessage","currentTimer","setCurrentTimer","timerDialogOpen","setTimerDialogOpen","onAdd","StepContext","onAddDm","StepContextDm","isTimerSet","standupRemaining","setStandupRemaining","standupEndTime","setStandupEndTime","submitMessage","message","trim","route","timeSent","getTime","startsWith","found","match","alert","isNaN","isInteger","timeFinish","now","Math","round","checkStandupActive","isActive","multiline","onKeyDown","getModifierState","InputProps","endAdornment","InputAdornment","StepProvider","DmMessages","messages","setMessages","pagination","setPagination","fetchDmMessages","p","start","isPaginating","currentStart","newMessages","end","currentEnd","sliceStart","isEnd","pinnedMessages","m","isPinned","min","messageId","slice","reverse","PAGINATION_SIZE","withTheme","isPinnedState","setIsPinnedState","stepDm","path","mdiPin","action","active","mdiPinOutline","MessageReact","messaged","reacts","thumbUpCount","isReacted","thumbUpIndex","findIndex","react","reactId","isThisUserReacted","Badge","anchorOrigin","horizontal","vertical","badgeContent","messageReact","fontSize","MessageRemove","MessageEdit","prompt","put","MessageShareDialog","ogMessageId","selectedChannel","setSelectedChannel","selectedDm","setSelectedDm","selectedChDm","setSelectedChDm","channelsShare","setChannelsShare","dmsShare","setDmsShare","setMessage","rowsMax","Message","isUnread","setNameFirst","setNameLast","imgUrl","setImgUrl","fullName","s","join","initials","user","email","handleStr","profileImgUrl","error","ListItemAvatar","Avatar","border","src","timeago","secondary","fontFamily","ChannelMessages","fetchChannelMessages","Placeholder","CircularProgress","Channel","loading","setLoading","setName","members","setMembers","owners","setOwners","fetchChannelData","ownerMembers","allMembers","finally","userIsMember","member","userIsOwner","owner","viewerIsMember","toUpperCase","href","removeOwner","addOwner","leaveChannel","joinChannel","ChannelPage","Dm","membersList","setMembersList","fetchDmData","leaveDm","removeDm","DmPage","light","card","background","marginTop","LoginPage","setAuth","Container","maxWidth","Box","boxShadow","noValidate","password","authUserId","required","autoComplete","RegisterPage","values","setValues","handleChange","ForgotPasswordPage","resetCode","newPassword","EditableFields","editable","master","masterValue","slaves","slaveValues","onSave","edit","setEdit","prevMasterValue","setPrevMasterValue","currMasterValue","setCurrMasterValue","prevSlaveValues","setPrevSlaveValues","currSlaveValues","setCurrSlaveValues","toggleEdit","slave","readOnly","valueIndex","copySlaves","val","onSlaveChange","cursor","UserStats","involvementRate","Profile","profile","profileDetails","setProfileDetails","toString","passedProps","rawText","items","split","xStart","yStart","xEnd","yEnd","ProfilePage","Search","Array","isArray","marginBottom","LinearProgress","SearchPage","ProtectedRoute","defaults","baseURL","headers","CancelToken","interceptors","request","use","toast","Promise","reject","responseMessage","_","App","document","authDetails","setAuthDetails","setItem","exact","render","ResetPasswordPage","Boolean","location","hostname","createMuiTheme","main","red","A400","default","ReactDOM","ThemeProvider","utils","MomentUtils","CssBaseline","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnVisibilityChange","draggable","pauseOnHover","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b9e3a034.chunk.js","sourcesContent":["import React from 'react';\n\nconst AuthContext = React.createContext();\n\nexport const AuthProvider = AuthContext.Provider;\nexport const AuthConsumer = AuthContext.Consumer;\nexport default AuthContext;\n","require(\"dotenv\").config();\n\nlet port = \"0\";\nlet deployedUrl = \"https://example.alwaysdata.net\";\nif (window.BACKEND_PORT !== undefined) {\n  port = window.BACKEND_PORT;\n  deployedUrl = window.DEPLOYED_URL;\n} else {\n  port = process.env.REACT_APP_BACKEND_PORT;\n}\nexport const url = port === \"0\" || port === undefined ? deployedUrl : \"http://localhost:\" + port;\nconsole.log(\"Using backend at \" + url);\n\nexport const drawerWidth = 240;\nexport const PERMISSION_IDS = {\n  OWNER: 1,\n  MEMBER: 2\n};\nexport const PAGINATION_SIZE = 50;\nexport const SLICE_SIZE = 10;\n","// from: https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nimport { useEffect, useRef } from 'react';\n\nexport function useInterval(callback, delay) {\n    const savedCallback = useRef();\n\n    // Remember the latest callback.\n    useEffect(() => {\n        savedCallback.current = callback;\n    }, [callback]);\n\n    // Set up the interval.\n    useEffect(() => {\n        function tick() {\n        savedCallback.current();\n        }\n        if (delay !== null) {\n        let id = setInterval(tick, delay);\n        return () => clearInterval(id);\n        }\n    }, [delay]);\n}\n\nexport const isMatchingId = (a,b) => parseInt(a,10) === parseInt(b,10)\n","import React from 'react';\nimport {useInterval} from './index';\n\nexport let stepSubscribers = [];\n\nexport const subscribeToStep = (subscriber, interval=1) => {\n    if (stepSubscribers.find(o => o.subscriber === subscriber) !== undefined) return;\n    stepSubscribers.push({ subscriber, interval });\n}\nexport const unsubscribeToStep = (unsubscriber) => stepSubscribers = stepSubscribers.filter(o => o.subscriber !== unsubscriber);\n\nexport const step = (iter) => {\n    stepSubscribers.forEach(o => {\n        console.log(iter, o.interval, iter % o.interval == 0, o.subscriber)\n        if (!iter || iter % o.interval == 0) {\n            o.subscriber()\n        }\n    });\n}\n\nexport const useStep = (subscriber, watches=[], interval=1) => {\n    const shouldSubscribe = subscriber && typeof subscriber === \"function\";\n    React.useEffect(() => {\n        if (shouldSubscribe) {\n            subscriber();\n            subscribeToStep(subscriber, interval);\n            return () => unsubscribeToStep(subscriber);\n        }\n    }, watches);\n    return step;\n};\n\nlet isPolling = false;\nexport const pollingInterval = 2000;\nexport const getIsPolling = () => isPolling;\nexport const setIsPolling = bool => {\n    isPolling = !!bool; // force boolean type\n}\n\n/* IMPORTANT: Called in PollToggle */\nlet count = 0;\nexport const usePolling = () => {\n    useInterval(() => {\n        if (isPolling) step(count++);\n    }, pollingInterval);\n}\n","import React from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport { getIsPolling, setIsPolling, step, usePolling } from '../../utils/update';\n\nconst options = ['Live', 'Step'];\n\nfunction PollToggle() {\n\n    const [open, setOpen] = React.useState(false);\n    const anchorRef = React.useRef(null);\n    const [selectedIndex, setSelectedIndex] = React.useState(getIsPolling() ? 0 : 1);\n\n    usePolling();\n\n    const handleClick = () => {\n        step();\n    };\n\n    const handleMenuItemClick = (event, index) => {\n        setIsPolling(index === 0);\n        setSelectedIndex(index);\n        setOpen(false);\n    };\n\n    const handleToggle = () => {\n        setOpen(prevOpen => !prevOpen);\n    };\n\n    const handleClose = event => {\n        if (anchorRef.current && anchorRef.current.contains(event.target)) {\n            return;\n        }\n        setOpen(false);\n    };\n\n    return (<>\n        <ButtonGroup\n            variant=\"contained\"\n            color=\"primary\"\n            ref={anchorRef}\n            aria-label=\"split button\"\n            style={{marginRight: 15}}\n        >\n            <Button onClick={handleClick} disabled={selectedIndex === 0}>{options[selectedIndex]}</Button>\n            <Button\n            color=\"primary\"\n            size=\"small\"\n            aria-owns={open ? 'menu-list-grow' : undefined}\n            aria-haspopup=\"true\"\n            onClick={handleToggle}\n            >\n            <ArrowDropDownIcon />\n            </Button>\n        </ButtonGroup>\n        <Popper open={open} anchorEl={anchorRef.current} transition disablePortal>\n            {({ TransitionProps, placement }) => (\n            <Grow\n                {...TransitionProps}\n                style={{\n                transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                }}\n            >\n                <Paper id=\"menu-list-grow\">\n                <ClickAwayListener onClickAway={handleClose}>\n                    <MenuList>\n                    {options.map((option, index) => (\n                        <MenuItem\n                        key={option}\n                        disabled={index === 2}\n                        selected={index === selectedIndex}\n                        onClick={event => handleMenuItemClick(event, index)}\n                        >\n                        {option}\n                        </MenuItem>\n                    ))}\n                    </MenuList>\n                </ClickAwayListener>\n                </Paper>\n            </Grow>\n            )}\n        </Popper>\n    </>);\n}\n\nexport default PollToggle;","import React from \"react\";\nimport axios from 'axios';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  Button,\n  Grid,\n  FormControlLabel,\n  RadioGroup,\n  Radio,\n  MenuItem,\n  Select,\n} from \"@material-ui/core\";\nimport AuthContext from \"../../AuthContext\";\nimport { PERMISSION_IDS } from \"../../utils/constants\";\n\nfunction SetUserPermissionsDialog({ children, ...props }) {\n\n  const [open, setOpen] = React.useState(false);\n  const [permissionId, setPermissionId] = React.useState(PERMISSION_IDS.MEMBER);\n  const [users, setUsers] = React.useState([]);\n  const [selectedUser, setSelectedUser] = React.useState('');\n  const token = React.useContext(AuthContext);\n\n  function fetchUserData() {\n    axios\n      .get('/users/all/v1', {\n        params: {\n          token,\n        },\n      })\n      .then(({ data }) => {\n        setUsers(data['users']);\n      })\n      .catch((err) => { });\n  }\n\n  React.useEffect(() => {\n    fetchUserData();\n  }, []);\n\n\n  const handleRadioChange = event => {\n    const newPermissionId = parseInt(event.target.value, 10);\n    setPermissionId(newPermissionId);\n  };\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (!event.target[0].value) return;\n\n    const uId = parseInt(event.target[0].value, 10);\n    const permissionId = parseInt(permissionId, 10);\n\n    axios\n      .post(`/admin/userpermission/change/v1`, {\n        token,\n        uId: Number.parseInt(uId),\n        permissionId: Number.parseInt(permissionId),\n      })\n      .then(response => {\n        console.log(response);\n      })\n      .catch(err => { });\n  }\n\n  return <>\n    <div onClick={handleClickOpen}>\n      {children}\n    </div>\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      <DialogTitle id=\"form-dialog-title\">Set User Permissions</DialogTitle>\n      <form onSubmit={handleSubmit}>\n        <DialogContent>\n          <DialogContentText>\n            Select a user below to set permissions for this user\n          </DialogContentText>\n          <Grid\n            container\n            spacing={2}\n            direction=\"row\"\n            justify=\"center\"\n            alignItems=\"center\"\n          >\n            <Grid item xs={12}>\n              <Select style={{ width: \"100%\" }} id=\"uId\" onChange={handleUserSelect} value={selectedUser}>\n                {users.map((d, idx) => {\n                  return <MenuItem key={d.uId} value={d.uId}>{d.nameFirst} {d.nameLast}</MenuItem>\n                })}\n              </Select>\n            </Grid>\n            <Grid container item justify=\"center\" alignItems=\"center\">\n              <RadioGroup aria-label=\"position\" name=\"position\" value={permissionId} onChange={handleRadioChange} row>\n                <FormControlLabel\n                  value={PERMISSION_IDS.MEMBER}\n                  control={<Radio color=\"primary\" />}\n                  label=\"Member\"\n                  labelPlacement=\"bottom\"\n                />\n                <FormControlLabel\n                  value={PERMISSION_IDS.OWNER}\n                  control={<Radio color=\"primary\" />}\n                  label=\"Owner\"\n                  labelPlacement=\"bottom\"\n                />\n              </RadioGroup>\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n            Set\n          </Button>\n        </DialogActions>\n      </form>\n    </Dialog>\n  </>;\n}\n\nexport default SetUserPermissionsDialog;\n","import React from \"react\";\nimport axios from 'axios';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  Button,\n  Grid,\n  MenuItem,\n  Select,\n} from \"@material-ui/core\";\nimport AuthContext from \"../../AuthContext\";\n\nfunction UserRemoveDialog({ children, ...props }) {\n\n  const [open, setOpen] = React.useState(false);\n  const [users, setUsers] = React.useState([]);\n  const [selectedUser, setSelectedUser] = React.useState('');\n  const token = React.useContext(AuthContext);\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      axios\n        .get('/users/all/v1', {\n          params: {\n            token,\n          },\n        })\n        .then(({ data }) => {\n          setUsers(data['users']);\n        })\n        .catch((err) => { });\n    }\n\n    fetchUserData();\n  }, []);\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (!event.target[0].value) return;\n\n    const uId = parseInt(event.target[0].value, 10);\n\n    axios\n      .delete(`/admin/user/remove/v1`, {\n        params: {\n          token,\n          uId: Number.parseInt(uId),\n        }\n      })\n      .then(response => {\n        console.log(response);\n      })\n      .catch(err => { });\n  }\n\n  return <>\n    <div onClick={handleClickOpen}>\n      {children}\n    </div>\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      <DialogTitle id=\"form-dialog-title\">Remove Users</DialogTitle>\n      <form onSubmit={handleSubmit}>\n        <DialogContent>\n          <DialogContentText>\n            Select a user below to remove\n          </DialogContentText>\n          <Grid\n            container\n            spacing={2}\n            direction=\"row\"\n            justify=\"center\"\n            alignItems=\"center\"\n          >\n            <Grid item xs={12}>\n              <Select style={{ width: \"100%\" }} id=\"uId\" onChange={handleUserSelect} value={selectedUser}>\n                {users.map((d, idx) => {\n                  return <MenuItem key={d.uId} value={d.uId}>{d.nameFirst} {d.nameLast}</MenuItem>\n                })}\n              </Select>\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n            Remove\n          </Button>\n        </DialogActions>\n      </form>\n    </Dialog>\n  </>;\n}\n\nexport default UserRemoveDialog;\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport SetUserPermissionsDialog from './SetUserPermissionsDialog';\nimport UserRemoveDialog from './UserRemoveDialog';\n\nexport default function Admin() {\n\n  const [open, setOpen] = React.useState(false);\n  const buttonRef = React.useRef();\n\n  const handleClick = (event) => setOpen(true);\n  const handleClose = () => setOpen(false);\n\n  return (\n    <div>\n      <Button\n        ref={buttonRef}\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n        color=\"inherit\"\n      >\n        Admin\n      </Button>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={buttonRef.current}\n        keepMounted\n        open={open}\n        onClose={handleClose}\n      >\n        <SetUserPermissionsDialog>\n          <MenuItem onClick={handleClose}>Set User Permissions</MenuItem>\n        </SetUserPermissionsDialog>\n        <UserRemoveDialog>\n          <MenuItem onClick={handleClose}>Remove Users</MenuItem>\n        </UserRemoveDialog>\n        <MenuItem onClick={handleClose}>Close</MenuItem>\n      </Menu>\n    </div>\n  );\n}\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport InputBase from '@material-ui/core/InputBase';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport SearchIcon from '@material-ui/icons/Search';\n\nconst useStyles = makeStyles(theme => ({\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing(1),\n      width: 'auto',\n      marginRight: theme.spacing(2),\n    },\n  },\n  searchIcon: {\n    width: theme.spacing(7),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  inputRoot: {\n    color: 'inherit',\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 7),\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      width: 120,\n      '&:focus': {\n        width: 200,\n      },\n    },\n  },\n}));\n\nfunction SearchBar(props) {\n  const classes = useStyles();\n\n  const [queryStr, setQueryStr] = React.useState(\"\");\n\n  const onSubmit = () => props.history.push(`/search/${queryStr}`);\n\n  return (\n    <form onSubmit={onSubmit}>\n      <div className={classes.search}>\n        <div className={classes.searchIcon}>\n          <SearchIcon />\n        </div>\n        <InputBase\n          placeholder=\"Search\"\n          classes={{\n            root: classes.inputRoot,\n            input: classes.inputInput,\n          }}\n          inputProps={{ 'aria-label': 'search' }}\n          value={queryStr}\n          onChange={e => setQueryStr(e.target.value)}\n        />\n      </div>\n    </form>\n  );\n}\n\nexport default withRouter(SearchBar);","import React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport AuthContext from '../AuthContext';\n\nexport default function NotificationList() {\n\n  const [open, setOpen] = React.useState(false);\n  const [notifs, setNotifs] = React.useState([]);\n  const buttonRef = React.useRef();\n  const token = React.useContext(AuthContext);\n\n  // React.useEffect(() => {\n  //   axios\n  //     .get('/notifications/get/v1', {\n  //       params: { token },\n  //     })\n  //     .then(({ data }) => {\n  //       setNotifs(data.notifications);\n  //     })\n  //     .catch((err) => { });\n  // }, [open]);\n\n  const handleClick = (event) => setOpen(true);\n  const handleClose = () => setOpen(false);\n\n  return (\n    <div>\n      <Button\n        ref={buttonRef}\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n        color=\"inherit\"\n      >\n        Notifications\n      </Button>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={buttonRef.current}\n        keepMounted\n        open={open}\n        onClose={handleClose}\n      >\n        {notifs.length === 0\n          ? <div>&nbsp;You don't have any notifications.&nbsp;</div>\n          : notifs.map((notif) => {\n            if (notif.dmId === -1) {\n              return (\n                <MenuItem component={Link} to={`/channel/${notif.channelId}`}>\n                  {notif.notificationMessage}\n                </MenuItem>\n              )\n            } else {\n              return (\n                <MenuItem component={Link} to={`/dm/${notif.dmId}`}>\n                  {notif.notificationMessage}\n                </MenuItem>\n              )\n            }\n          })}\n        <MenuItem onClick={handleClose}>Close</MenuItem>\n      </Menu>\n    </div>\n  );\n}","import axios from 'axios';\nimport {\n  AppBar,\n  Button,\n  IconButton,\n  Toolbar,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport AuthContext from '../../AuthContext';\nimport { drawerWidth } from '../../utils/constants';\nimport PollToggle from '../PollToggle';\nimport Admin from '../Admin';\nimport SearchBar from '../Search/SearchBar';\nimport NotificationList from '../NotificationList';\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    marginLeft: drawerWidth,\n    [theme.breakpoints.up('sm')]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n    },\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  logoutButton: {\n    float: 'right',\n  },\n}));\n\nfunction Header({ handleMenuToggle = () => { } }) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n  const token = React.useContext(AuthContext);\n  const [loggedOut, setLoggedOut] = React.useState(false);\n\n  if (loggedOut) {\n    axios.post(`/auth/logout/v1`, { token })\n      .then((response) => {\n        console.log(response);\n      })\n      .catch((err) => { });\n    localStorage.removeItem('token');\n    localStorage.removeItem('uId');\n    return <Redirect to=\"/login\" />;\n  }\n\n  return (\n    <AppBar position=\"fixed\" className={classes.appBar}>\n      <Toolbar>\n        {!matches && (\n          <>\n            <IconButton\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              edge=\"start\"\n              onClick={handleMenuToggle}\n              className={classes.menuButton}\n            >\n              <MenuIcon />\n            </IconButton>\n            <Link to=\"/\" style={{ color: 'white', textDecoration: 'none' }}>\n              <Typography variant=\"h5\" noWrap>\n                Treats\n              </Typography>\n            </Link>\n          </>\n        )}\n        <div variant=\"h6\" className={classes.title}>\n\n        </div>\n        <div style={{ display: 'flex' }}>\n          <SearchBar />\n          <PollToggle />\n          <NotificationList />\n          <Admin />\n          <Button\n            color=\"inherit\"\n            className={classes.logoutButton}\n            onClick={() => {\n              setLoggedOut(true);\n            }}\n          >\n            Logout\n          </Button>\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nexport default Header;\n","import React from 'react';\nimport { Divider, Drawer, Hidden, Typography } from '@material-ui/core';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { drawerWidth } from '../../utils/constants';\nimport { Link } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme) => ({\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  toolbar: {\n    ...theme.mixins.toolbar,\n    display: 'flex',\n    alignItems: 'center',\n    paddingLeft: theme.spacing(2),\n  },\n}));\n\nfunction SideMenu({ container, children, open, setOpen }) {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  return (\n    <nav className={classes.drawer} aria-label=\"channels\">\n      {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n      <Hidden smUp implementation=\"css\">\n        <Drawer\n          container={container}\n          variant=\"temporary\"\n          anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n          open={open}\n          onClose={() => setOpen(false)}\n          classes={{\n            paper: classes.drawerPaper,\n          }}\n          ModalProps={{\n            keepMounted: true, // Better open performance on mobile.\n          }}\n        >\n          <div className={classes.toolbar} />\n          <Divider />\n          {children}\n        </Drawer>\n      </Hidden>\n      <Hidden xsDown implementation=\"css\">\n        <Drawer\n          classes={{\n            paper: classes.drawerPaper,\n          }}\n          variant=\"permanent\"\n          open\n        >\n          <div className={classes.toolbar}>\n            <Link to=\"/\" style={{ color: 'black', textDecoration: 'none' }}>\n              <Typography variant=\"h5\" noWrap>\n                Treats\n              </Typography>\n            </Link>\n          </div>\n          {children}\n        </Drawer>\n      </Hidden>\n    </nav>\n  );\n}\n\nexport default SideMenu;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { drawerWidth } from '../../utils/constants';\n\nconst useStyles = makeStyles((theme) => ({\n  body: {\n    [theme.breakpoints.up('sm')]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n    },\n    padding: 20,\n  },\n  toolbar: theme.mixins.toolbar,\n}));\n\nfunction Body({ children }) {\n  const classes = useStyles();\n  return (\n    <div className={classes.body}>\n      {/* Padding */}\n      <div className={classes.toolbar} />\n      {children}\n    </div>\n  );\n}\n\nexport default Body;\n","import React from 'react';\nimport Header from './Header';\nimport SideMenu from './SideMenu';\nimport Body from './Body';\n\nfunction Layout({ menu, body }) {\n  const [open, setOpen] = React.useState(false);\n  function handleMenuToggle() {\n    setOpen((open) => !!!open);\n  }\n  return (\n    <div style={{ display: 'flex' }}>\n      <Header handleMenuToggle={handleMenuToggle} />\n      <SideMenu open={open} setOpen={setOpen}>\n        {menu}\n      </SideMenu>\n      <Body>{body}</Body>\n    </div>\n  );\n}\n\nexport default Layout;\n","export function extractUId(token) {\n  let uId = localStorage.getItem('uId');\n  if (uId == null) {\n    uId = -1;\n  }\n  return uId;\n}\n","import React from 'react';\nimport { List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport { Link } from 'react-router-dom';\nimport { extractUId } from '../utils/token';\nimport AuthContext from '../AuthContext';\n\nfunction ProfileList() {\n  const uid = extractUId(React.useContext(AuthContext));\n  return (\n    <List>\n      <ListItem button key={'profile'} component={Link} to={`/profile/${uid}`}>\n        <ListItemIcon>\n          <AccountCircle />\n        </ListItemIcon>\n        <ListItemText primary=\"Profile\" />\n      </ListItem>\n    </List>\n  );\n}\n\nexport default ProfileList;\n","import React from \"react\";\nimport axios from 'axios';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  IconButton,\n  Button,\n  Switch,\n  TextField,\n  Grid,\n  FormControlLabel,\n} from \"@material-ui/core\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\nimport Add from \"@material-ui/icons/Add\";\nimport AuthContext from \"../../AuthContext\";\n\nfunction AddChannelDialog({ ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const token = React.useContext(AuthContext);\n  function handleClickOpen() {\n    setOpen(true);\n  }\n  function handleClose() {\n    setOpen(false);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    const name = event.target[0].value;\n    const secret = event.target[1].checked;\n    const isPublic = !secret;\n\n    if (!name) return;\n\n    axios\n      .post(`/channels/create/v2`, { token, name, isPublic })\n      .then(response => {\n        console.log(response);\n        props.callback();\n      })\n      .catch(err => { });\n  }\n  return (\n    <div>\n      <IconButton size=\"small\" onClick={handleClickOpen}>\n        <Add />\n      </IconButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Create Channel</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <DialogContentText>\n              Complete the form below to create a new channel\n            </DialogContentText>\n            <Grid\n              container\n              spacing={2}\n              direction=\"row\"\n              justify=\"center\"\n              alignItems=\"center\"\n            >\n              <Grid item xs={12}>\n                <TextField\n                  autoFocus\n                  margin=\"dense\"\n                  id=\"channelName\"\n                  label=\"Channel Name\"\n                  name=\"channelName\"\n                  fullWidth\n                />\n              </Grid>\n              <Grid container item justify=\"center\" alignItems=\"center\">\n                <Visibility />\n                <FormControlLabel\n                  control={\n                    <Switch\n                      value=\"secret\"\n                      inputProps={{ \"aria-label\": \"Secret\" }}\n                    />\n                  }\n                  label=\"Secret\"\n                  labelPlacement=\"top\"\n                />\n                <VisibilityOff />\n              </Grid>\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Create\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AddChannelDialog;\n","import React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n} from '@material-ui/core';\n\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\nimport AuthContext from '../AuthContext';\nimport AddChannelDialog from './Channel/AddChannelDialog';\n\nimport { useStep } from '../utils/update';\n\nfunction ChannelList({ channelId: currChannelId }) {\n  const [myChannels, setMyChannels] = React.useState([]);\n  const [allChannels, setAllChannels] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const fetchChannelsData = () => {\n    // fetch channels data\n    const getMyChannels = axios.get('/channels/list/v2', { params: { token } });\n    const getAllChannels = axios.get('/channels/listall/v2', { params: { token } });\n\n    axios.all([getMyChannels, getAllChannels]).then(\n      axios.spread((myChannelResponse, allChannelResponse) => {\n        const myChannelData = myChannelResponse.data.channels;\n        const allChannelData = allChannelResponse.data.channels;\n        const filteredChannels = allChannelData.filter((channel) => {\n          return (\n            myChannelData.find((c) => c.channelId === channel.channelId) ===\n            undefined\n          );\n        });\n        setMyChannels(myChannelData);\n        setAllChannels(filteredChannels);\n      })\n    );\n  };\n\n  useStep(fetchChannelsData, [], 2);\n\n  return (\n    <>\n      <List\n        subheader={\n          <ListSubheader style={{ display: 'flex' }}>\n            <span style={{ flex: 1 }}>My Channels</span>\n            <AddChannelDialog callback={fetchChannelsData} />\n          </ListSubheader>\n        }\n      >\n        {myChannels.map(({ channelId, name }, index) => (\n          <ListItem\n            button\n            key={channelId}\n            component={Link}\n            to={`/channel/${channelId}`}\n          >\n            <ListItemIcon>\n              {channelId == currChannelId ? (\n                <RadioButtonCheckedIcon />\n              ) : (\n                <RadioButtonUncheckedIcon />\n              )}\n            </ListItemIcon>\n            <ListItemText primary={name} />\n          </ListItem>\n        ))}\n      </List>\n      <List subheader={<ListSubheader>Other Channels</ListSubheader>}>\n        {allChannels.map(({ channelId, name }, index) => (\n          <ListItem\n            button\n            key={channelId}\n            component={Link}\n            to={`/channel/${channelId}`}\n          >\n            <ListItemIcon>\n              {channelId == currChannelId ? (\n                <RadioButtonCheckedIcon />\n              ) : (\n                <RadioButtonUncheckedIcon />\n              )}\n            </ListItemIcon>\n            <ListItemText primary={name} />\n          </ListItem>\n        ))}\n      </List>\n    </>\n  );\n}\n\nexport default ChannelList;\n","import React from \"react\";\nimport axios from 'axios';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  IconButton,\n  Button,\n  Select,\n  Input,\n  MenuItem\n} from \"@material-ui/core\";\nimport Add from \"@material-ui/icons/Add\";\nimport AuthContext from \"../../AuthContext\";\nimport { extractUId } from '../../utils/token';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n};\n\nfunction AddDmDialog({ ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedUsers, setSelectedUsers] = React.useState([]);\n  const [users, setUsers] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n  const uId = extractUId(token);\n\n  function fetchUserData() {\n    axios\n      .get('/users/all/v1', {\n        params: {\n          token,\n        },\n      })\n      .then(({ data }) => {\n        setUsers(data['users']);\n      })\n      .catch((err) => { });\n  }\n\n  React.useEffect(() => {\n    fetchUserData();\n  }, []);\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleUserSelect(event) {\n    setSelectedUsers(event.target.value);\n  };\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    console.log(selectedUsers);\n\n    axios\n      .post(`/dm/create/v1`, { token, uIds: selectedUsers })\n      .then(response => {\n        console.log(response);\n        props.callback();\n      })\n      .catch(err => { });\n  }\n  return (\n    <div>\n      <IconButton size=\"small\" onClick={handleClickOpen}>\n        <Add />\n      </IconButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Create Dm</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <DialogContentText>\n              Select the users below to create a new dm\n            </DialogContentText>\n            <Select\n              multiple\n              value={selectedUsers}\n              onChange={handleUserSelect}\n              input={<Input />}\n              MenuProps={MenuProps}\n              style={{ width: \"100%\" }}\n            >\n              {users.map((d, idx) => {\n                if (uId != d.uId) {\n                  return <MenuItem key={d.uId} value={d.uId}>{d.nameFirst + ' ' + d.nameLast}</MenuItem>\n                }\n              })}\n            </Select>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Create\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AddDmDialog;\n","import React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n} from '@material-ui/core';\n\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\nimport AuthContext from '../AuthContext';\nimport AddDmDialog from './Dm/AddDmDialog';\n\nimport { useStep } from '../utils/update';\n\nfunction DmList({ dmId: currDmId }) {\n  const [myDms, setMyDms] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const fetchDmsData = () => {\n    axios\n      .get('/dm/list/v1', {\n        params: {\n          token,\n        },\n      })\n      .then(({ data }) => {\n        setMyDms(data['dms']);\n      })\n      .catch((err) => { });\n  };\n\n  useStep(fetchDmsData, [], 2);\n\n  return (\n    <>\n      <List\n        subheader={\n          <ListSubheader style={{ display: 'flex' }}>\n            <span style={{ flex: 1 }}>My Dms</span>\n            <AddDmDialog callback={fetchDmsData} />\n          </ListSubheader>\n        }\n      >\n        {myDms.map(({ dmId, name }) => (\n          <ListItem\n            button\n            key={dmId}\n            component={Link}\n            to={`/dm/${dmId}`}\n          >\n            <ListItemIcon>\n              {dmId == currDmId ? (\n                <RadioButtonCheckedIcon />\n              ) : (\n                <RadioButtonUncheckedIcon />\n              )}\n            </ListItemIcon>\n            <ListItemText primary={name} />\n          </ListItem>\n        ))}\n      </List>\n    </>\n  );\n}\n\nexport default DmList;\n","import React from 'react';\nimport ProfileList from './ProfileList';\nimport ChannelList from './ChannelList';\nimport DmList from './DmList';\n\nfunction ProfileChannelLists({ channelId, dmId }) {\n  return (\n    <>\n      <ProfileList />\n      <ChannelList channelId={channelId} />\n      <DmList dmId={dmId} />\n    </>\n  );\n}\n\nexport default ProfileChannelLists;\n","import axios from 'axios';\nimport React from 'react';\nimport { Scatter } from \"react-chartjs-2\";\nimport { Typography } from '@material-ui/core';\nimport AuthContext from '../AuthContext';\n\nfunction WorkspaceStats() {\n\n  const token = React.useContext(AuthContext);\n  const [utilizationRate, setUtilizationRate] = React.useState(0);\n  const [channelsData, setChannelsData] = React.useState([]);\n  const [dmsData, setDmsData] = React.useState([]);\n  const [messagesData, setMessagesData] = React.useState([]);\n\n  // React.useEffect(() => {\n  //   axios\n  //     .get(`/users/stats/v1`, { params: { token } })\n  //     .then(({ data }) => {\n  //       console.log(data);\n  //       const { workspaceStats } = data;\n  //       setUtilizationRate(workspaceStats['utilizationRate']);\n  //       setChannelsData(workspaceStats['channelsExist'].map((obj) => {\n  //         return { x: new Date(obj['timeStamp'] * 1000), y: obj['numChannelsExist'] };\n  //       }));\n  //       setDmsData(workspaceStats['dmsExist'].map((obj) => {\n  //         return { x: new Date(obj['timeStamp'] * 1000), y: obj['numDmsExist'] };\n  //       }));\n  //       setMessagesData(workspaceStats['messagesExist'].map((obj) => {\n  //         return { x: new Date(obj['timeStamp'] * 1000), y: obj['numMessagesExist'] };\n  //       }));\n  //     })\n  //     .catch((err) => {\n  //       console.error(err);\n  //     })\n  // }, [token]);\n\n  return (\n    <>\n      <Typography variant=\"h5\">Workspace statistics</Typography>\n      <p>Wow! {(utilizationRate * 100).toFixed(2)}% utilisation</p>\n      <Scatter\n        data={{\n          datasets: [\n            {\n              label: \"Channels\",\n              data: channelsData,\n              fill: false,\n              borderColor: \"#742774\",\n              showLine: true,\n            },\n            {\n              label: \"Dms\",\n              data: dmsData,\n              fill: false,\n              borderColor: \"#4287f5\",\n              showLine: true,\n            },\n            {\n              label: \"Messages\",\n              data: messagesData,\n              fill: false,\n              borderColor: \"#bd2d4f\",\n              showLine: true,\n            },\n          ]\n        }}\n        options={{\n          scales: {\n            xAxes: [{\n              title: \"time\",\n              type: 'time',\n              gridLines: {\n                lineWidth: 2\n              },\n              time: {\n                unitStepSize: 200,\n                displayFormats: {\n                  millisecond: 'MMM DD HH:mm',\n                  second: 'MMM DD HH:mm',\n                  minute: 'MMM DD HH:mm',\n                  hour: 'MMM DD HH:mm',\n                  day: 'MMM DD',\n                  week: 'MMM DD',\n                  month: 'MMM DD',\n                  quarter: 'MMM DD',\n                  year: 'MMM DD',\n                }\n              }\n            }]\n          }\n        }}\n      />\n    </>\n  );\n}\n\nexport default WorkspaceStats;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport WorkspaceStats from '../components/WorkspaceStats';\nimport { Typography } from '@material-ui/core';\n\nfunction HomePage() {\n  return (\n    <Layout\n      menu={<ProfileChannelLists />}\n      body={\n        <>\n          <Typography variant=\"h4\">WELCOME</Typography>\n          <div style={{ paddingTop: 15 }}>\n            <Typography variant=\"body1\">\n              This is Treats: agile messaging for Software Engineers\n            </Typography>\n          </div>\n          <br />\n          <WorkspaceStats />\n        </>\n      }\n    />\n  );\n}\n\nexport default HomePage;\n","import React from 'react';\nimport axios from 'axios';\n\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  MenuItem,\n  Select,\n  DialogContentText,\n  Button,\n} from '@material-ui/core';\nimport AuthContext from '../../AuthContext';\nimport { useStep } from '../../utils/update';\n\nfunction AddMemberDialog({ channelId, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedUser, setSelectedUser] = React.useState('');\n  const [users, setUsers] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const step = useStep();\n\n\n  function fetchUserData() {\n    axios\n      .get('/users/all/v1', {\n        params: {\n          token,\n        },\n      })\n      .then(({ data }) => {\n        setUsers(data['users']);\n      })\n      .catch((err) => { });\n  }\n\n  React.useEffect(() => {\n    fetchUserData();\n  }, []);\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n  function handleClose() {\n    setOpen(false);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    const uId = selectedUser;\n\n    if (uId == null) return;\n\n    axios.post(`/channel/invite/v2`, {\n      token,\n      uId: Number.parseInt(uId),\n      channelId: Number.parseInt(channelId),\n    })\n      .then((response) => {\n        console.log(response);\n        step();\n      })\n      .catch((err) => { });\n  }\n  return (\n    <div>\n      <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\n        Invite Member\n      </Button>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Invite User</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <DialogContentText>\n              Select a user below to invite them to this channel\n            </DialogContentText>\n            <Select style={{ width: \"100%\" }} id=\"uId\" onChange={handleUserSelect} value={selectedUser}>\n              {users.map((d, idx) => {\n                return <MenuItem key={d.uId} value={d.uId}>{d.nameFirst} {d.nameLast}</MenuItem>\n              })}\n            </Select>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Invite\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AddMemberDialog;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core';\nimport { KeyboardTimePicker } from '@material-ui/pickers';\nimport React from 'react';\n\nfunction AddMessageTimerDialog({ open, handleClose, onTimerChange, ...props }) {\n  const [selectedDate, setSelectedDate] = React.useState(new Date());\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    onTimerChange(selectedDate);\n  }\n\n  return (\n    <div>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Send later</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <KeyboardTimePicker\n              margin=\"normal\"\n              id=\"time-picker\"\n              label=\"Time picker\"\n              value={selectedDate}\n              onChange={(d) => setSelectedDate(d.toDate())}\n              KeyboardButtonProps={{\n                'aria-label': 'change time',\n              }}\n            />\n            <DialogContentText>Enter a time to send</DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Set Time\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AddMessageTimerDialog;\n","import axios from 'axios';\nimport {\n  Button,\n  TextField,\n  InputAdornment,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport SendIcon from '@material-ui/icons/Send';\nimport TimerIcon from '@material-ui/icons/Timer';\nimport { makeStyles } from '@material-ui/styles';\nimport AuthContext from '../../AuthContext';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\nimport AddMessageTimerDialog from './AddMessageTimerDialog';\nimport { useInterval } from '../../utils';\nimport { useStep } from '../../utils/update';\n\nconst useStyles = makeStyles((theme) => ({\n  flex: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  input: {\n    margin: theme.spacing(1),\n    marginRight: 0,\n  },\n  button: {\n    margin: theme.spacing(1),\n    marginLeft: 0,\n    alignSelf: 'stretch',\n  },\n  rightIcon: {\n    marginLeft: theme.spacing(1),\n  },\n  standupTimer: {\n    margin: theme.spacing(2),\n  }\n}));\n\nconst TIMER_INACTIVE_VALUE = -1;\n\nfunction AddMessage({ channelId = -1, dmId = -1 }) {\n\n  const classes = useStyles();\n  const [currentMessage, setCurrentMessage] = React.useState('');\n  const [currentTimer, setCurrentTimer] = React.useState(TIMER_INACTIVE_VALUE);\n  const [timerDialogOpen, setTimerDialogOpen] = React.useState(false);\n  const token = React.useContext(AuthContext);\n  let onAdd = React.useContext(StepContext);\n  let onAddDm = React.useContext(StepContextDm);\n  onAdd = onAdd ? onAdd : () => { }; // sanity check\n  onAddDm = onAddDm ? onAddDm : () => { }; // sanity check\n\n  const isTimerSet = currentTimer !== TIMER_INACTIVE_VALUE;\n\n  const [standupRemaining, setStandupRemaining] = React.useState();\n  const [standupEndTime, setStandupEndTime] = React.useState();\n\n  const submitMessage = () => {\n    const message = currentMessage.trim();\n    if (!message) return;\n    setCurrentMessage('');\n\n    /**\n     * Sending a message when a standup is active\n     * note: probably makes sense that this takes precedence over\n     *       starting a standup.\n     */\n    if (dmId === -1 && standupRemaining && standupRemaining > 0) {\n      axios.post(`/standup/send/v1`, {\n        token,\n        channelId: Number.parseInt(channelId),\n        message,\n      })\n        .then(({ data }) => {\n          console.log(data);\n          onAdd();\n        })\n        .catch((err) => { });\n      return;\n    }\n\n    /**\n     * Sending a message when the sendlater timer has been set\n     */\n    if (isTimerSet) {\n      const route = dmId === -1 ? '/message/sendlater/v1' : 'message/sendlaterdm/v1';\n      axios.post(route, {\n        token,\n        channelId: Number.parseInt(channelId),\n        dmId: Number.parseInt(dmId),\n        message,\n        timeSent: (currentTimer.getTime() / 1000), // ms to s conversion\n      })\n        .then(({ data }) => {\n          console.log(data);\n        })\n        .catch((err) => { });\n      setCurrentTimer(TIMER_INACTIVE_VALUE);\n      return;\n    }\n\n    /**\n     * Starting a standup (any message which starts with /standup)\n     */\n    if (dmId === -1 && message.startsWith('/standup')) {\n      const re = /\\/standup\\s+([1-9][0-9]*)/;\n      const found = message.match(re);\n      if (!found || found.length < 2) {\n        alert('Usage: /standup <duration in seconds>');\n      } else {\n        var length = parseInt(found[1], 10);\n        if (isNaN(length) || !Number.isInteger(length)) {\n          alert('Usage: /standup <duration in seconds>');\n        } else {\n          axios.post(`/standup/start/v1`, {\n            token,\n            channelId: Number.parseInt(channelId),\n            length,\n          })\n            .then(({ data }) => {\n              const { timeFinish } = data;\n              setStandupEndTime(timeFinish);\n              alert(`You've started a standup for ${length} seconds`);\n            })\n            .catch((err) => { });\n        }\n      }\n      return;\n    }\n\n    /**\n     * Default message sending behaviour\n     */\n    const route = dmId === -1 ? '/message/send/v1' : 'message/senddm/v1';\n    axios.post(route, {\n      token,\n      channelId: Number.parseInt(channelId),\n      dmId: Number.parseInt(dmId),\n      message,\n    })\n      .then(({ data }) => {\n        console.log(data);\n        onAdd();\n        onAddDm();\n      })\n      .catch((err) => { });\n  };\n\n  useInterval(() => {\n    if (standupEndTime > Date.now() / 1000) {\n      setStandupRemaining(() => Math.round(standupEndTime - Math.round(Date.now() / 1000)));\n    } else {\n      setStandupRemaining();\n    }\n  }, 1000);\n\n  const checkStandupActive = () => {\n    if (channelId === -1) return;\n    axios\n      .get('/standup/active/v1', { params: { token, channelId } })\n      .then(({ data }) => {\n        const { isActive = false, timeFinish } = data;\n        if (isActive && timeFinish) {\n          setStandupEndTime(timeFinish);\n        } else {\n          setStandupRemaining(0);\n          setStandupEndTime(-1);\n        }\n      })\n      .catch((err) => { });\n  }\n\n  useStep(checkStandupActive, [currentMessage] /* check when user is typing */);\n\n  React.useEffect(checkStandupActive, [channelId]);\n\n  const keyDown = (e) => {\n    if (e.key === 'Enter' && !e.getModifierState('Shift')) {\n      e.preventDefault();\n      submitMessage();\n    }\n  };\n\n  return (\n    <>\n      {standupRemaining > 0 && <Typography variant=\"caption\" className={classes.standupTimer}>\n        {`STANDUP ACTIVE: ${standupRemaining} seconds remaining`}\n      </Typography>}\n      <div className={classes.flex}>\n        <TextField\n          className={classes.input}\n          label=\"Send a message \"\n          multiline\n          placeholder=\"...\"\n          fullWidth\n          margin=\"normal\"\n          variant=\"filled\"\n          onKeyDown={keyDown}\n          value={currentMessage}\n          onChange={(e) => setCurrentMessage(e.target.value)}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <IconButton\n                  aria-label=\"toggle visibility\"\n                  disabled={standupRemaining > 0}\n                  onClick={() =>\n                    isTimerSet ? setCurrentTimer(-1) : setTimerDialogOpen(true)\n                  }\n                >\n                  <TimerIcon color={isTimerSet ? 'secondary' : undefined} />\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        />\n        <Button\n          className={classes.button}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={submitMessage}\n        >\n          Send\n          <SendIcon className={classes.rightIcon} />\n        </Button>\n      </div>\n      <AddMessageTimerDialog\n        open={timerDialogOpen}\n        handleClose={() => setTimerDialogOpen(false)}\n        onTimerChange={setCurrentTimer}\n      />\n    </>\n  );\n}\n\nexport default AddMessage;\n","import React from 'react';\nimport axios from 'axios';\n\nimport { List, ListSubheader, Button, ListItem } from '@material-ui/core';\nimport { useStep } from '../../utils/update';\nimport Message from '../Message';\nimport AuthContext from '../../AuthContext';\nimport AddMessage from '../Message/AddMessage';\nimport { PAGINATION_SIZE, SLICE_SIZE } from '../../utils/constants';\n\n\nexport const StepContextDm = React.createContext();\nexport const StepProvider = StepContextDm.Provider;\nexport const StepConsumer = StepContextDm.Consumer;\n\nfunction DmMessages({ dmId = '' }) {\n\n  const [messages, setMessages] = React.useState([]);\n  const [pagination, setPagination] = React.useState({\n    \"dmId\": dmId,\n    \"isPaginating\": false,\n    \"currentStart\": 0,\n    \"currentEnd\": 0,\n    \"sliceStart\": 0,\n  })\n  const token = React.useContext(AuthContext);\n\n  const fetchDmMessages = () => {\n    const p = pagination.dmId === dmId\n      ? pagination\n      : {\n        \"dmId\": dmId,\n        \"isPaginating\": false,\n        \"currentStart\": 0,\n        \"currentEnd\": 0,\n        \"sliceStart\": 0,\n      }\n    axios\n      .get('/dm/messages/v1', {\n        params: {\n          token,\n          dmId: Number.parseInt(dmId),\n          start: p.isPaginating ? p.currentStart : 0,\n        },\n      })\n      .then(({ data }) => {\n        const { messages: newMessages, start, end } = data;\n        setPagination({ ...p, dmId: dmId, currentEnd: end }); // TODO: add/remove problems\n        setMessages(newMessages);\n      })\n      .catch((err) => { });\n  }\n  useStep(fetchDmMessages, [dmId, pagination.currentStart]);\n\n  const onPrev = () => setPagination(({ sliceStart, currentStart, currentEnd, ...pagination }) => {\n\n    const pageSize = messages.length;\n\n    if (sliceStart + SLICE_SIZE < pageSize) {\n      return {\n        ...pagination,\n        currentStart,\n        currentEnd,\n        sliceStart: sliceStart + SLICE_SIZE,\n        isPaginating: true,\n      };\n    }\n\n    return {\n      ...pagination,\n      currentEnd,\n      currentStart: currentEnd,\n      sliceStart: 0,\n      isPaginating: true,\n    };\n\n  });\n\n  const onNext = () => setPagination(({ sliceStart, currentStart, ...pagination }) => {\n\n    if (sliceStart >= SLICE_SIZE) {\n      return {\n        ...pagination,\n        currentStart,\n        sliceStart: sliceStart - SLICE_SIZE,\n        isPaginating: !(currentStart == 0 && sliceStart == SLICE_SIZE)\n      };\n    }\n\n    if (currentStart >= PAGINATION_SIZE) {\n      if (currentStart) return {\n        ...pagination,\n        currentStart: currentStart - PAGINATION_SIZE,\n        sliceStart: PAGINATION_SIZE - SLICE_SIZE,\n      };\n    }\n\n    return {\n      ...pagination,\n      currentStart: 0,\n      sliceStart: 0,\n      isPaginating: false,\n    };\n\n  });\n\n  const { currentStart, currentEnd, sliceStart, isPaginating } = pagination;\n\n  const isEnd = currentEnd == -1 && sliceStart >= messages.length - SLICE_SIZE;\n\n  const pinnedMessages = messages.filter(m => m.isPinned);\n  const subheader = !messages.length\n    ? `Messages (None)`\n    : `Messages [${currentStart + sliceStart + 1}...${Math.min(currentStart + messages.length, currentStart + sliceStart + SLICE_SIZE)}]`;\n\n  return (\n    <StepProvider value={fetchDmMessages}>\n      {pinnedMessages.length > 0 && <>\n        <hr />\n        <List subheader={<ListSubheader>Pinned Messages</ListSubheader>}>\n          {pinnedMessages.map(m => <Message key={m.messageId} {...m} />)}\n        </List>\n      </>}\n      <hr />\n      <List\n        subheader={<ListSubheader>{subheader}</ListSubheader>}\n        style={{ width: '100%' }}\n      >\n        {\n          (!isEnd &&\n            <ListItem>\n              <Button\n                variant=\"outlined\"\n                color=\"secondary\"\n                onClick={onPrev}\n              >\n                Previous messages\n              </Button>\n            </ListItem>\n          )\n        }\n        {messages.slice(sliceStart, sliceStart + SLICE_SIZE).reverse().map((message) => (\n          <Message key={message.messageId} {...message} />\n        ))}\n        {\n          (isPaginating &&\n            <ListItem>\n              <Button\n                variant=\"outlined\"\n                color=\"secondary\"\n                onClick={onNext}\n              >\n                Next messages\n              </Button>\n            </ListItem>\n          )\n        }\n      </List>\n      <AddMessage dmId={dmId} />\n    </StepProvider>\n  );\n}\n\nexport default DmMessages;\n","import React from 'react';\nimport axios from 'axios';\n\nimport MdiIcon from '@mdi/react';\nimport { mdiPin, mdiPinOutline } from '@mdi/js';\nimport { IconButton } from '@material-ui/core';\n\nimport { withTheme } from '@material-ui/styles';\n\nimport AuthContext from '../../AuthContext';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\n\nfunction MessagePin({\n  messageId,\n  isPinned = false,\n  theme,\n}) {\n\n  const [isPinnedState, setIsPinnedState] = React.useState(isPinned);\n  React.useEffect(() => setIsPinnedState(isPinned), [isPinned]);\n\n  const token = React.useContext(AuthContext);\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => { }; // sanity check\n  stepDm = stepDm ? stepDm : () => { }; // sanity check\n\n  const toggle = () => {\n    if (isPinnedState) {\n      axios.post(`/message/unpin/v1`, {\n        token,\n        messageId: Number.parseInt(messageId),\n      })\n        .then(() => {\n          step();\n          stepDm();\n        });\n    } else {\n      axios.post(`/message/pin/v1`, {\n        token,\n        messageId: Number.parseInt(messageId),\n      })\n        .then(() => {\n          step();\n          stepDm();\n        });\n    }\n    // Optimistic re-rendering\n    // setIsPinned(isPinnedState => !!!isPinnedState);\n  };\n\n  return (\n    <IconButton\n      onClick={toggle}\n      style={{ margin: 1 }}\n      size=\"small\"\n      edge=\"end\"\n      aria-label=\"delete\"\n    >\n      {isPinnedState ? (\n        <MdiIcon\n          path={mdiPin}\n          size=\"1em\"\n          color={theme && theme.palette.action.active}\n        />\n      ) : (\n        <MdiIcon\n          path={mdiPinOutline}\n          size=\"1em\"\n          color={theme && theme.palette.action.active}\n        />\n      )}\n    </IconButton>\n  );\n}\n\nexport default withTheme(MessagePin);\n","import React from 'react';\nimport axios from 'axios';\n\nimport {\n  Badge,\n  IconButton,\n} from '@material-ui/core';\n\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\nimport ThumbUpOutlinedIcon from '@material-ui/icons/ThumbUpOutlined';\n\nimport AuthContext from '../../AuthContext';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\n\nfunction MessageReact({\n  messaged,\n  reacts = [] /* [{ reactId, uIds }] */,\n}) {\n\n  const token = React.useContext(AuthContext);\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => { }; // sanity check\n  stepDm = stepDm ? stepDm : () => { }; // sanity check\n\n  const messageReact = (isReacted) => {\n    if (isReacted) {\n      axios.post(`/message/unreact/v1`, {\n        token,\n        messaged: Number.parseInt(messaged),\n        reactId: 1 /* FIXME */,\n      })\n        .then(() => {\n          step();\n          stepDm();\n        });\n    } else {\n      axios.post(`/message/react/v1`, {\n        token,\n        messaged: Number.parseInt(messaged),\n        reactId: 1 /* FIXME */,\n      })\n        .then(() => {\n          step();\n          stepDm();\n        });\n    }\n  };\n\n  let thumbUpCount = 0;\n  let isReacted = false;\n  const thumbUpIndex = reacts.findIndex((react) => react.reactId === 1);\n  if (thumbUpIndex !== -1) {\n    thumbUpCount = reacts[thumbUpIndex].uIds.length;\n    isReacted = reacts[thumbUpIndex].isThisUserReacted;\n  }\n\n  return (\n    <Badge\n      anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n      badgeContent={thumbUpCount}\n      color=\"secondary\"\n    >\n      <IconButton\n        onClick={() => messageReact(isReacted)}\n        style={{ margin: 1 }}\n        size=\"small\"\n        edge=\"end\"\n        aria-label=\"delete\"\n      >\n        {isReacted ? (\n          <ThumbUpIcon fontSize=\"small\" />\n        ) : (\n          <ThumbUpOutlinedIcon fontSize=\"small\" />\n        )}\n      </IconButton>\n    </Badge>\n  );\n}\n\nexport default MessageReact;\n","import React from 'react';\nimport axios from 'axios';\n\nimport { IconButton } from '@material-ui/core';\n\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport AuthContext from '../../AuthContext';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\n\nfunction MessageRemove({\n  messageId,\n  disabled = false,\n}) {\n\n  const token = React.useContext(AuthContext);\n\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => { }; // sanity check\n  stepDm = stepDm ? stepDm : () => { }; // sanity check\n\n  const messageRemove = () => {\n    axios.delete(`/message/remove/v1`, {\n      params: {\n        token,\n        messageId: Number.parseInt(messageId),\n      }\n    })\n      .then(() => {\n        step();\n        stepDm();\n      });\n  };\n\n\n  return (\n    <IconButton\n      disabled={disabled}\n      onClick={messageRemove}\n      style={{ margin: 1 }}\n      size=\"small\"\n      edge=\"end\"\n      aria-label=\"delete\"\n    >\n      <DeleteIcon fontSize=\"small\" />\n    </IconButton>\n  );\n}\n\nexport default MessageRemove;\n","import React from 'react';\nimport axios from 'axios';\n\nimport {\n    IconButton,\n} from '@material-ui/core';\n\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport AuthContext from '../../AuthContext';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\n\nfunction MessageEdit({\n    messageId,\n    disabled = false,\n}) {\n\n    const token = React.useContext(AuthContext);\n\n    let step = React.useContext(StepContext);\n    let stepDm = React.useContext(StepContextDm);\n    step = step ? step : () => { }; // sanity check\n    stepDm = stepDm ? stepDm : () => { }; // sanity check\n\n    const messageEdit = () => {\n        const message = prompt();\n        if (message === null) return; // basic validation\n\n        /**\n         * Empty message should delete original\n         */\n        if (message === \"\") {\n            axios.delete(`/message/remove/v1`, {\n                params: {\n                    token,\n                    messageId: Number.parseInt(messageId),\n                }\n            })\n                .then(() => {\n                    step();\n                    stepDm();\n                });\n            return;\n        }\n\n        /**\n         * Default message edit behaviour\n         */\n        axios.put(`/message/edit/v1`, {\n            token,\n            messageId: Number.parseInt(messageId),\n            message,\n        })\n            .then(() => {\n                step();\n                stepDm();\n            });\n    };\n\n    return (\n        <IconButton\n            disabled={disabled}\n            onClick={messageEdit}\n            style={{ margin: 1 }}\n            size=\"small\"\n            edge=\"end\"\n            aria-label=\"delete\"\n        >\n            <EditIcon fontSize=\"small\" />\n        </IconButton>\n    );\n}\n\nexport default MessageEdit;\n","import React from 'react';\nimport axios from 'axios';\n\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  MenuItem,\n  Select,\n  DialogContentText,\n  Button,\n  IconButton,\n  TextField,\n} from '@material-ui/core';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\n\nimport AuthContext from '../../AuthContext';\nimport { useStep } from '../../utils/update';\n\nfunction MessageShareDialog({ ogMessageId, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedChannel, setSelectedChannel] = React.useState(-1);\n  const [selectedDm, setSelectedDm] = React.useState(-1);\n  const [selectedChDm, setSelectedChDm] = React.useState('');\n  const [channelsShare, setChannelsShare] = React.useState([]);\n  const [dmsShare, setDmsShare] = React.useState([]);\n  const [message, setMessage] = React.useState('');\n\n  const token = React.useContext(AuthContext);\n\n  const step = useStep();\n\n  function fetchChannelData() {\n    axios\n      .get('channels/list/v2', {\n        params: {\n          token,\n        },\n      })\n      .then(({ data }) => {\n        setChannelsShare(data['channels']);\n      })\n      .catch((err) => { });\n    axios\n      .get('dm/list/v1', {\n        params: {\n          token,\n        },\n      })\n      .then(({ data }) => {\n        setDmsShare(data['dms']);\n      })\n      .catch((err) => { });\n  }\n\n  React.useEffect(() => {\n    fetchChannelData();\n  }, []);\n\n  const handleChannelSelect = event => {\n    setSelectedChDm(event.target.value);\n    if (event.target.value.slice(0, 1) === 'd') {\n      setSelectedDm(event.target.value.slice(1));\n      setSelectedChannel(-1);\n    } else {\n      setSelectedChannel(event.target.value.slice(1));\n      setSelectedDm(-1);\n    }\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  const handleChange = (event) => {\n    setMessage(event.target.value);\n  };\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    axios.post(`/message/share/v1`, {\n      token,\n      ogMessageId: Number.parseInt(ogMessageId),\n      message,\n      channelId: Number.parseInt(selectedChannel),\n      dmId: Number.parseInt(selectedDm),\n    })\n      .then((response) => {\n        console.log(response);\n        step();\n      })\n      .catch((err) => { });\n  }\n  return (\n    <div>\n      <IconButton\n        onClick={handleClickOpen}\n        style={{ margin: 1 }}\n        size=\"small\"\n        edge=\"end\"\n        aria-label=\"share\"\n      >\n        <ArrowForwardIcon fontSize=\"small\" />\n      </IconButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Share message</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <DialogContentText>\n              Enter a channel below to share the message to\n            </DialogContentText>\n            <Select style={{ width: \"100%\" }} id=\"u_id\" onChange={handleChannelSelect} value={selectedChDm}>\n              {channelsShare.map((d) => {\n                return <MenuItem key={d.channelId} value={`c${d.channelId}`}>{d.name}</MenuItem>\n              })}\n              {dmsShare.map((d) => {\n                return <MenuItem key={d.dmId} value={`d${d.dmId}`}>{d.name}</MenuItem>\n              })}\n            </Select>\n            <br /><br />\n            <DialogContentText>\n              Optionally, enter an additional message\n            </DialogContentText>\n            <TextField\n              multiline\n              fullWidth\n              rowsMax={4}\n              value={message}\n              onChange={handleChange}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Share\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default MessageShareDialog;\n","import React from 'react';\nimport timeago from 'epoch-timeago';\nimport axios from 'axios';\n\nimport {\n  Avatar,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n} from '@material-ui/core';\n\nimport AuthContext from '../../AuthContext';\nimport MessagePin from './MessagePin';\nimport MessageReact from './MessageReact';\nimport MessageRemove from './MessageRemove';\nimport MessageEdit from './MessageEdit';\nimport MessageShareDialog from './MessageShareDialog';\n\nimport { isMatchingId } from '../../utils';\nimport { extractUId } from '../../utils/token';\n\nfunction Message({\n  messageId,\n  message = '',\n  uId,\n  timeSent,\n  isUnread = false,\n  isPinned = false,\n  reacts = [] /* [{ reactId, uIds }] */,\n}) {\n\n  const [nameFirst, setNameFirst] = React.useState();\n  const [nameLast, setNameLast] = React.useState();\n  const [imgUrl, setImgUrl] = React.useState();\n  const token = React.useContext(AuthContext);\n  const isUser = isMatchingId(uId, extractUId(token));\n\n  const fullName = [nameFirst, nameLast].filter(s => s != null && s !== '').join(' ');\n  const initials = [nameFirst, nameLast].filter(s => s != null && s !== '').map(s => s[0]).join('');\n  const msgToList = msg => msg.split(\"\\n\");\n\n  React.useEffect(() => {\n    setNameFirst();\n    setNameLast();\n    setImgUrl()\n    axios\n      .get(`/user/profile/v2`, {\n        params: {\n          token,\n          uId,\n        },\n      })\n      .then(({ data }) => {\n        const {\n          user: {\n            email = '',\n            nameFirst = '',\n            nameLast = '',\n            handleStr = '',\n            profileImgUrl = '',\n          },\n        } = data;\n        setNameFirst(nameFirst);\n        setNameLast(nameLast);\n        setImgUrl(`${profileImgUrl}`);\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }, [messageId, token, uId]);\n\n  return (\n    <ListItem key={messageId} style={{ width: '100%' }}>\n      {message && (\n        <>\n          <ListItemAvatar>\n            <Avatar style={{ width: \"50px\", height: \"50px\", border: \"1px solid #ccc\" }} src={imgUrl}>\n              {initials}\n            </Avatar>\n          </ListItemAvatar>\n          <div\n            style={{\n              display: 'flex',\n              width: '100%',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n            }}\n          >\n            <ListItemText\n              primary={\n                <>\n                  <span>{fullName}</span>\n                  <span style={{ paddingLeft: 10, fontSize: 10 }}>\n                    {timeago(timeSent * 1000)}\n                  </span>\n                </>\n              }\n              secondary={\n                <div>\n                  <pre style={{ fontFamily: 'inherit' }}>{message}</pre>\n                </div>\n              }\n            />\n            <div style={{ display: 'flex', height: 30, marginLeft: 20 }}>\n              <MessageReact\n                messageId={messageId}\n                reacts={reacts}\n                uId={uId}\n              />\n              <MessagePin\n                messageId={messageId}\n                isPinned={isPinned}\n              />\n              <MessageShareDialog\n                ogMessageId={messageId}\n              />\n              <MessageEdit\n                messageId={messageId}\n              // disabled={!isUser} /* We have no way of checking admin status */\n              />\n              <MessageRemove\n                messageId={messageId}\n              // disabled={!isUser} /* We have no way of checking admin status */\n              />\n            </div>\n          </div>\n        </>\n      )}\n    </ListItem>\n  );\n}\n\nexport default Message;\n","import React from 'react';\nimport axios from 'axios';\n\nimport { List, ListSubheader, Button, ListItem } from '@material-ui/core';\nimport { useStep } from '../../utils/update';\nimport Message from '../Message';\nimport AuthContext from '../../AuthContext';\nimport AddMessage from '../Message/AddMessage';\nimport { PAGINATION_SIZE, SLICE_SIZE } from '../../utils/constants';\n\n\nexport const StepContext = React.createContext();\nexport const StepProvider = StepContext.Provider;\nexport const StepConsumer = StepContext.Consumer;\n\nfunction ChannelMessages({ channelId = '' }) {\n\n  const [messages, setMessages] = React.useState([]);\n  const [pagination, setPagination] = React.useState({\n    \"channelId\": channelId,\n    \"isPaginating\": false,\n    \"currentStart\": 0,\n    \"currentEnd\": 0,\n    \"sliceStart\": 0,\n  })\n  const token = React.useContext(AuthContext);\n\n  const fetchChannelMessages = () => {\n    const p = pagination.channelId === channelId\n      ? pagination\n      : {\n        \"channelId\": channelId,\n        \"isPaginating\": false,\n        \"currentStart\": 0,\n        \"currentEnd\": 0,\n        \"sliceStart\": 0,\n      }\n    axios\n      .get('/channel/messages/v2', {\n        params: {\n          token,\n          channelId: Number.parseInt(channelId),\n          start: p.isPaginating ? p.currentStart : 0,\n        },\n      })\n      .then(({ data }) => {\n        const { messages: newMessages, start, end } = data;\n        setPagination({ ...p, channelId: channelId, currentEnd: end }); // TODO: add/remove problems\n        setMessages(newMessages);\n      })\n      .catch((err) => { });\n  }\n  useStep(fetchChannelMessages, [channelId, pagination.currentStart]);\n\n  const onPrev = () => setPagination(({ sliceStart, currentStart, currentEnd, ...pagination }) => {\n\n    const pageSize = messages.length;\n\n    if (sliceStart + SLICE_SIZE < pageSize) {\n      return {\n        ...pagination,\n        currentStart,\n        currentEnd,\n        sliceStart: sliceStart + SLICE_SIZE,\n        isPaginating: true,\n      };\n    }\n\n    return {\n      ...pagination,\n      currentEnd,\n      currentStart: currentEnd,\n      sliceStart: 0,\n      isPaginating: true,\n    };\n\n  });\n\n  const onNext = () => setPagination(({ sliceStart, currentStart, ...pagination }) => {\n\n    if (sliceStart >= SLICE_SIZE) {\n      return {\n        ...pagination,\n        currentStart,\n        sliceStart: sliceStart - SLICE_SIZE,\n        isPaginating: !(currentStart == 0 && sliceStart == SLICE_SIZE)\n      };\n    }\n\n    if (currentStart >= PAGINATION_SIZE) {\n      if (currentStart) return {\n        ...pagination,\n        currentStart: currentStart - PAGINATION_SIZE,\n        sliceStart: PAGINATION_SIZE - SLICE_SIZE,\n      };\n    }\n\n    return {\n      ...pagination,\n      currentStart: 0,\n      sliceStart: 0,\n      isPaginating: false,\n    };\n\n  });\n\n  const { currentStart, currentEnd, sliceStart, isPaginating } = pagination;\n\n  const isEnd = currentEnd == -1 && sliceStart >= messages.length - SLICE_SIZE;\n\n  const pinnedMessages = messages.filter(m => m.isPinned);\n  const subheader = !messages.length\n    ? `Messages (None)`\n    : `Messages [${currentStart + sliceStart + 1}...${Math.min(currentStart + messages.length, currentStart + sliceStart + SLICE_SIZE)}]`;\n\n  return (\n    <StepProvider value={fetchChannelMessages}>\n      {pinnedMessages.length > 0 && <>\n        <hr />\n        <List subheader={<ListSubheader>Pinned Messages</ListSubheader>}>\n          {pinnedMessages.map(m => <Message key={m.messageId} {...m} />)}\n        </List>\n      </>}\n      <hr />\n      <List\n        subheader={<ListSubheader>{subheader}</ListSubheader>}\n        style={{ width: '100%' }}\n      >\n        {\n          (!isEnd &&\n            <ListItem>\n              <Button\n                variant=\"outlined\"\n                color=\"secondary\"\n                onClick={onPrev}\n              >\n                Previous messages\n              </Button>\n            </ListItem>\n          )\n        }\n        {messages.slice(sliceStart, sliceStart + SLICE_SIZE).reverse().map((message) => (\n          <Message key={message.messageId} {...message} />\n        ))}\n        {\n          (isPaginating &&\n            <ListItem>\n              <Button\n                variant=\"outlined\"\n                color=\"secondary\"\n                onClick={onNext}\n              >\n                Next messages\n              </Button>\n            </ListItem>\n          )\n        }\n      </List>\n      <AddMessage channelId={channelId} />\n    </StepProvider>\n  );\n}\n\nexport default ChannelMessages;\n","import {CircularProgress} from \"@material-ui/core\";\r\nimport React from \"react\";\r\n\r\nfunction Placeholder() {\r\n    return <div style={{\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\"\r\n    }}>\r\n        <CircularProgress />\r\n    </div>;\r\n}\r\n\r\nexport default Placeholder;\r\n","import {\n  Avatar,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListSubheader,\n  Typography,\n  Button,\n  Grid,\n  Link,\n  IconButton\n} from '@material-ui/core';\nimport PersonAdd from '@material-ui/icons/PersonAdd';\nimport PersonAddDisabled from '@material-ui/icons/PersonAddDisabled';\nimport axios from 'axios';\nimport React from 'react';\nimport AddMemberDialog from './AddMemberDialog';\nimport ChannelMessages from './ChannelMessages';\nimport AuthContext from '../../AuthContext';\nimport { extractUId } from '../../utils/token';\nimport { isMatchingId } from '../../utils';\nimport { useStep } from '../../utils/update';\nimport Placeholder from '../Placeholder';\n\nfunction Channel({ channelId, ...props }) {\n  const [loading, setLoading] = React.useState(true);\n  const [name, setName] = React.useState('');\n  const [members, setMembers] = React.useState([]);\n  const [owners, setOwners] = React.useState([]);\n  const token = React.useContext(AuthContext);\n  const uId = extractUId(token);\n\n  function fetchChannelData() {\n    axios\n      .get('/channel/details/v2', {\n        params: {\n          token,\n          channelId: channelId,\n        },\n      })\n      .then(({ data }) => {\n        const { name, ownerMembers, allMembers } = data;\n        // assumes members of form [{ uId, nameFirst, nameLast }]\n        setMembers(allMembers);\n        setOwners(ownerMembers);\n        setName(name);\n      })\n      .catch((err) => {\n        setMembers([]);\n        setOwners([]);\n        setName('');\n      })\n      .finally(() => setLoading(false));\n  }\n\n  useStep(fetchChannelData, [channelId, token], 2);\n\n  function joinChannel(channelId, token) {\n    axios\n      .post('/channel/join/v2', {\n        token,\n        channelId: Number.parseInt(channelId),\n      })\n      .then(() => {\n        fetchChannelData(channelId, token);\n      })\n      .catch((err) => { });\n  }\n\n  function leaveChannel(channelId, token) {\n    axios\n      .post('/channel/leave/v1', {\n        token,\n        channelId: Number.parseInt(channelId),\n      })\n      .then(() => {\n        fetchChannelData(channelId, token);\n      })\n      .catch((err) => { });\n  }\n\n  function addOwner(uId) {\n    axios\n      .post('/channel/addowner/v1', {\n        token,\n        channelId: Number.parseInt(channelId),\n        uId: Number.parseInt(uId),\n      })\n      .then(() => {\n        fetchChannelData(channelId, token);\n      })\n      .catch((err) => { });\n  }\n\n  function removeOwner(uId) {\n    axios\n      .post('/channel/removeowner/v1', {\n        token,\n        channelId: Number.parseInt(channelId),\n        uId: Number.parseInt(uId),\n      })\n      .then(() => {\n        fetchChannelData(channelId, token);\n      })\n      .catch((err) => { });\n  }\n\n  function userIsMember(members) {\n    return members.find((member) => isMatchingId(member.uId, uId)) !== undefined;\n  }\n\n  function userIsOwner(owners, uId) {\n    return owners.find((owner) => isMatchingId(owner.uId, uId)) !== undefined;\n  }\n\n  const viewerIsOwner = userIsOwner(owners, uId);\n  const viewerIsMember = userIsMember(members);\n\n  return <>\n    {loading\n      ? <Placeholder />\n      : <>\n        <Typography variant=\"h4\">{name.toUpperCase()}</Typography>\n        <List subheader={<ListSubheader>Members</ListSubheader>}>\n          {members.map(({ uId, nameFirst, nameLast, profileImgUrl }) => (\n            <ListItem key={uId}>\n              <ListItemAvatar>\n                <Avatar style={{ width: \"50px\", height: \"50px\", border: \"1px solid #ccc\" }} src={profileImgUrl}>\n                  {[nameFirst, nameLast].filter(s => s != null && s !== '').map(s => s[0]).join('')}\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText\n                primary={\n                  <>\n                    <Grid container alignItems=\"center\" spacing={1}>\n                      <Grid item>\n                        <Link\n                          href={`/profile/${uId}`}\n                        >{`${nameFirst} ${nameLast}`}</Link>\n                        {`${userIsOwner(owners, uId) ? ' ' : ' '}`}\n                      </Grid>\n                      <Grid item>\n                        {userIsOwner(owners, uId) ? (\n                          <IconButton\n                            size=\"small\"\n                            onClick={() => removeOwner(uId)}\n                          >\n                            <PersonAddDisabled />\n                          </IconButton>\n                        ) : (\n                          <IconButton\n                            size=\"small\"\n                            onClick={() => addOwner(uId)}\n                          >\n                            <PersonAdd />\n                          </IconButton>\n                        )}\n                      </Grid>\n                    </Grid>\n                  </>\n                }\n              />\n            </ListItem>\n          ))}\n          <ListItem key=\"invite_member\">\n            {userIsMember(members) ? (\n              <Grid container spacing={1}>\n                <Grid item>\n                  <AddMemberDialog channelId={channelId} />\n                </Grid>\n                <Grid item>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={() => leaveChannel(channelId, token)}\n                  >\n                    Leave Channel\n                  </Button>\n                </Grid>\n              </Grid>\n            ) : (\n              <Button\n                variant=\"outlined\"\n                color=\"primary\"\n                onClick={() => joinChannel(channelId, token)}\n              >\n                Join Channel\n              </Button>\n            )}\n          </ListItem>\n        </List>\n        {viewerIsMember && <ChannelMessages channelId={channelId} />}\n      </>\n    }\n  </>;\n}\n\nexport default Channel;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport Channel from '../components/Channel';\n\nfunction ChannelPage({ match }) {\n  const { channelId } = match.params;\n  return (\n    <Layout\n      menu={<ProfileChannelLists channelId={channelId} dmId={null} />}\n      body={<Channel channelId={channelId} />}\n    />\n  );\n}\n\nexport default ChannelPage;\n","import {\n  Avatar,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListSubheader,\n  Typography,\n  Button,\n  Grid,\n  Link,\n} from '@material-ui/core';\nimport axios from 'axios';\nimport React from 'react';\nimport DmMessages from './DmMessages';\nimport AuthContext from '../../AuthContext';\nimport { useStep } from '../../utils/update';\nimport Placeholder from '../Placeholder';\n\nfunction Dm({ dmId, ...props }) {\n  const [loading, setLoading] = React.useState(true);\n  const [name, setName] = React.useState('');\n  const [membersList, setMembersList] = React.useState([]);\n  const token = React.useContext(AuthContext);\n\n  function fetchDmData() {\n    axios\n      .get('/dm/details/v1', {\n        params: {\n          token,\n          dmId: dmId,\n        },\n      })\n      .then(({ data }) => {\n        const { name, members } = data;\n        // assumes members of form [{ uId, nameFirst, nameLast }]\n        console.log(members);\n        setMembersList(members);\n        setName(name);\n      })\n      .catch((err) => {\n        setMembersList([]);\n        setName('');\n      })\n      .finally(() => setLoading(false));\n  }\n\n  useStep(fetchDmData, [dmId, token], 2);\n\n  function leaveDm(dmId, token) {\n    axios\n      .post('/dm/leave/v1', {\n        token,\n        dmId: Number.parseInt(dmId),\n      })\n      .then(() => {\n        fetchDmData(dmId, token);\n      })\n      .catch((err) => { });\n  }\n\n  function removeDm(dmId, token) {\n    axios.delete(`/dm/remove/v1`, {\n      params: {\n        token,\n        dmId: Number.parseInt(dmId),\n      }\n    })\n      .then(() => {\n        fetchDmData(dmId, token);\n      })\n      .catch((err) => { });\n  }\n\n  return <>\n    {loading\n      ? <Placeholder />\n      : <>\n        <Typography variant=\"h4\">{name.toUpperCase()}</Typography>\n        <List subheader={<ListSubheader>Members</ListSubheader>}>\n          {membersList.map(({ uId, nameFirst, nameLast, profileImgUrl }) => (\n            <ListItem key={uId}>\n              <ListItemAvatar>\n                <Avatar style={{ width: \"50px\", height: \"50px\", border: \"1px solid #ccc\" }} src={profileImgUrl}>\n                  {[nameFirst, nameLast].filter(s => s != null && s !== '').map(s => s[0]).join('')}\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText\n                primary={\n                  <>\n                    <Grid container alignItems=\"center\" spacing={1}>\n                      <Grid item>\n                        <Link\n                          href={`/profile/${uId}`}\n                        >{`${nameFirst} ${nameLast}`}</Link>\n                      </Grid>\n                    </Grid>\n                  </>\n                }\n              />\n            </ListItem>\n          ))}\n          <ListItem key=\"leave_dm\">\n            <Grid container spacing={1}>\n              <Grid item>\n                <Button\n                  variant=\"outlined\"\n                  onClick={() => leaveDm(dmId, token)}\n                >\n                  Leave Dm\n                </Button>\n                &nbsp;\n                <Button\n                  variant=\"outlined\"\n                  onClick={() => removeDm(dmId, token)}\n                >\n                  Remove Dm\n                </Button>\n              </Grid>\n            </Grid>\n          </ListItem>\n        </List>\n        <DmMessages dmId={dmId} />\n      </>\n    }\n  </>;\n}\n\nexport default Dm;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport Dm from '../components/Dm';\n\nfunction DmPage({ match }) {\n  const { dmId } = match.params;\n  return (\n    <Layout\n      menu={<ProfileChannelLists channelId={null} dmId={dmId} />}\n      body={<Dm dmId={dmId} />}\n    />\n  );\n}\n\nexport default DmPage;\n","import axios from 'axios';\nimport {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport React from 'react';\nimport '../App.css';\nimport Placeholder from '../components/Placeholder';\n\nconst useStyles = makeStyles((theme) => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction LoginPage({ setAuth, ...props }) {\n\n  const [loading, setLoading] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const email = event.target[0].value;\n    const password = event.target[2].value;\n\n    // Quick validation\n    if (!email || !password) return;\n\n    setLoading(true);\n\n    // Send to backend\n    axios.post(`/auth/login/v2`, { email, password })\n      .then((response) => {\n        console.log(response);\n        const data = response.data;\n        setAuth(data.token, data.authUserId);\n        props.history.push('/');\n      })\n      .catch((err) => { })\n      .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box boxShadow={3} className={classes.card}>\n        <Avatar>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Login\n        </Typography>\n        {\n          loading\n            ? <div style={{ marginTop: \"64px\" }}><Placeholder /></div>\n            : <form noValidate onSubmit={handleSubmit}>\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"email\"\n                label=\"Email\"\n                name=\"email\"\n                type=\"text\"\n                autoFocus\n              />\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                name=\"password\"\n                label=\"Password\"\n                type=\"password\"\n                id=\"password\"\n                autoComplete=\"current-password\"\n              />\n              <div className=\"password-warning\">\n                Passwords are not securely stored.<br />\n                Do not enter any currently used passwords.\n              </div>\n              <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n                Sign In\n              </Button>\n              <Grid container direction=\"column\" alignItems=\"center\">\n                <Grid item>\n                  <br />\n                  <Link href=\"/register\" variant=\"body1\">\n                    {\"Don't have an account? Register\"}\n                  </Link>\n                </Grid>\n                <Grid item>\n                  <br />\n                  <Link href=\"/forgot_password\" variant=\"body1\">\n                    Forgot password?\n                  </Link>\n                </Grid>\n              </Grid>\n            </form>\n        }\n      </Box>\n    </Container>\n  );\n}\n\nexport default LoginPage;\n","import axios from 'axios';\nimport {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport DeveloperOutlinedIcon from '@material-ui/icons/DeveloperModeOutlined';\nimport React from 'react';\nimport Placeholder from '../components/Placeholder';\n\nconst useStyles = makeStyles((theme) => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction RegisterPage({ setAuth, ...props }) {\n\n  const [loading, setLoading] = React.useState(false);\n  const [values, setValues] = React.useState({\n    nameFirst: '',\n    nameLast: '',\n    email: '',\n    password: '',\n  });\n\n  const handleChange = name => event => {\n    setValues({ ...values, [name]: event.target.value });\n  };\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Quick validation\n    if (!values.email || !values.password) return;\n\n    setLoading(true);\n\n    // Send to backend\n    axios.post(`/auth/register/v2`, { ...values })\n      .then((response) => {\n        console.log(response);\n        const data = response.data;\n        setAuth(data.token, data.authUserId);\n        props.history.push('/');\n      })\n      .catch((err) => { })\n      .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box boxShadow={3} className={classes.card}>\n        <Avatar>\n          <DeveloperOutlinedIcon color=\"secondary\" />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Register\n        </Typography>\n        {loading\n          ? <div style={{ marginTop: \"64px\" }}><Placeholder /></div>\n          : <form noValidate onSubmit={handleSubmit}>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"nameFirst\"\n              label=\"First name\"\n              name=\"nameFirst\"\n              type=\"text\"\n              autoFocus\n              value={values.nameFirst}\n              onChange={handleChange('nameFirst')}\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"nameLast\"\n              label=\"Last name\"\n              name=\"nameLast\"\n              type=\"text\"\n              value={values.nameLast}\n              onChange={handleChange('nameLast')}\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Email\"\n              name=\"email\"\n              type=\"email\"\n              value={values.email}\n              onChange={handleChange('email')}\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n              value={values.password}\n              onChange={handleChange('password')}\n            />\n            <div className=\"password-warning\">\n              Passwords are not securely stored.<br />\n              Do not enter any currently used passwords.\n            </div>\n            <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n              Sign Up\n            </Button>\n            <Grid container>\n              <Grid item>\n                <br />\n                <Link href=\"/login\" variant=\"body1\">\n                  {'Already have an account? Login'}\n                </Link>\n              </Grid>\n            </Grid>\n          </form>\n        }\n      </Box>\n    </Container>\n  );\n}\n\nexport default RegisterPage;\n","import axios from 'axios';\nimport {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport DeveloperOutlinedIcon from '@material-ui/icons/DeveloperModeOutlined';\nimport React from 'react';\nimport Placeholder from \"../components/Placeholder\";\n\nconst useStyles = makeStyles((theme) => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction ForgotPasswordPage(props) {\n  const [loading, setLoading] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const email = event.target[0].value;\n\n    // Quick validation\n    if (!email) return;\n\n    setLoading(true);\n\n    // Send to backend\n    axios.post(`/auth/passwordreset/request/v1`, { email })\n      .then((response) => {\n        console.log(response);\n        props.history.push('/reset_password');\n      })\n      .catch((err) => { })\n      .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box boxShadow={3} className={classes.card}>\n        <Avatar>\n          <DeveloperOutlinedIcon color=\"secondary\" />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Forgot Password\n        </Typography>\n        {\n          loading\n            ? <div style={{ marginTop: \"64px\" }}><Placeholder /></div>\n            : <form noValidate onSubmit={handleSubmit}>\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"email\"\n                label=\"Email\"\n                name=\"email\"\n                type=\"email\"\n                autoFocus\n              />\n              <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n                Send Recovery Email\n              </Button>\n              <Grid container>\n                <Grid item>\n                  <br />\n                  <Link href=\"/login\" variant=\"body1\">\n                    {'Remember your password? Login'}\n                  </Link>\n                </Grid>\n              </Grid>\n            </form>\n        }\n      </Box>\n    </Container>\n  );\n}\n\nexport default ForgotPasswordPage;\n","import axios from 'axios';\nimport {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport DeveloperOutlinedIcon from '@material-ui/icons/DeveloperModeOutlined';\nimport React from 'react';\nimport Placeholder from \"../components/Placeholder\";\n\nconst useStyles = makeStyles((theme) => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction ForgotPasswordPage(props) {\n  const [loading, setLoading] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const resetCode = event.target[0].value;\n    const newPassword = event.target[2].value;\n\n    // Quick validation\n    if (!resetCode || !newPassword) return;\n\n    setLoading(true);\n\n    // Send to backend\n    axios.post(`/auth/passwordreset/reset/v1`, { resetCode, newPassword })\n      .then((response) => {\n        console.log(response);\n        props.history.push('/login');\n      })\n      .catch((err) => { })\n      .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box boxShadow={3} className={classes.card}>\n        <Avatar>\n          <DeveloperOutlinedIcon color=\"secondary\" />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Reset Password\n        </Typography>\n        {\n          loading\n            ? <div style={{ marginTop: \"64px\" }}><Placeholder /></div>\n            : <form noValidate onSubmit={handleSubmit}>\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"resetCode\"\n                label=\"Reset code\"\n                name=\"resetCode\"\n                type=\"text\"\n                autoFocus\n              />\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"newPassword\"\n                label=\"New Password\"\n                name=\"newPassword\"\n                type=\"password\"\n              />\n              <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n                Change Password\n              </Button>\n              <Grid container>\n                <Grid item>\n                  <br />\n                  <Link href=\"/login\" variant=\"body1\">\n                    {'Remember your password? Login'}\n                  </Link>\n                </Grid>\n              </Grid>\n            </form>\n        }\n      </Box>\n    </Container>\n  );\n}\n\nexport default ForgotPasswordPage;\n","import React from 'react';\nimport Edit from '@material-ui/icons/Edit';\nimport Cancel from '@material-ui/icons/Cancel';\nimport Save from '@material-ui/icons/Save';\nimport { Grid } from '@material-ui/core';\n\nfunction EditableFields({\n  editable,\n  master,\n  masterValue,\n  slaves,\n  slaveValues,\n  onSave,\n  ...props\n}) {\n\n  const [edit, setEdit] = React.useState(false);\n  const [prevMasterValue, setPrevMasterValue] = React.useState();\n  const [currMasterValue, setCurrMasterValue] = React.useState(masterValue);\n  const [prevSlaveValues, setPrevSlaveValues] = React.useState([]);\n  const [currSlaveValues, setCurrSlaveValues] = React.useState(slaveValues);\n\n  // Handle async passing of master/slave values\n  React.useEffect(() => {\n    setCurrMasterValue(masterValue);\n    setCurrSlaveValues(slaveValues);\n  }, [masterValue, slaveValues]);\n\n  function toggleEdit() {\n    setPrevMasterValue(currMasterValue);\n    setPrevSlaveValues(currSlaveValues);\n    setEdit(!edit);\n  }\n\n  function icons() {\n    if (!editable) return null;\n    if (edit) {\n      return (\n        <>\n          <Save\n            style={{ cursor: 'pointer' }}\n            onClick={() => {\n              if (currMasterValue == null) return;\n              if (onSave) {\n                if (currSlaveValues) {\n                  onSave(currMasterValue, ...currSlaveValues);\n                } else {\n                  onSave(currMasterValue);\n                }\n              }\n              toggleEdit();\n            }}\n          />\n          <Cancel\n            style={{ cursor: 'pointer' }}\n            onClick={() => {\n              setCurrMasterValue(prevMasterValue);\n              setCurrSlaveValues(prevSlaveValues);\n              toggleEdit();\n            }}\n          />\n        </>\n      );\n    }\n    return <Edit style={{ cursor: 'pointer' }} onClick={toggleEdit} />;\n  }\n  function onSlaveChange(event, valueIndex) {\n    let copySlaves = currSlaveValues.map((val, idx) => {\n      if (idx === valueIndex) return event.target.value;\n      return val;\n    });\n    setCurrSlaveValues(copySlaves);\n  }\n\n  function onMasterChange(event) {\n    setCurrMasterValue(event.target.value);\n  }\n\n  return (\n    <Grid container spacing={1} alignItems=\"flex-end\">\n      {slaves &&\n        slaves.map((slave, idx) => {\n          return (\n            <Grid item key={idx}>\n              {slave({\n                value: currSlaveValues[idx] || \"\", // \"\" required for label placeholder mechanics\n                InputProps: { readOnly: !edit },\n                onChange: (event) => onSlaveChange(event, idx),\n              })}\n            </Grid>\n          );\n        })}\n      <Grid item>\n        {master({\n          value: currMasterValue || \"\", // \"\" required for label placeholder mechanics\n          InputProps: { readOnly: !edit },\n          onChange: onMasterChange,\n        })}\n      </Grid>\n      {editable && <Grid item>{icons()}</Grid>}\n    </Grid>\n  );\n}\n\nexport default EditableFields;\n","import axios from 'axios';\nimport React from 'react';\nimport { Scatter } from \"react-chartjs-2\";\nimport { Typography } from '@material-ui/core';\nimport AuthContext from '../../AuthContext';\n\nfunction UserStats() {\n\n  const token = React.useContext(AuthContext);\n  const [involvementRate, setInvolvementRate] = React.useState(0);\n  const [channelsData, setChannelsData] = React.useState([]);\n  const [dmsData, setDmsData] = React.useState([]);\n  const [messagesData, setMessagesData] = React.useState([]);\n\n  // React.useEffect(() => {\n  //   axios\n  //     .get(`/user/stats/v1`, { params: { token } })\n  //     .then(({ data }) => {\n  //       console.log(data);\n  //       const { userStats } = data;\n  //       setInvolvementRate(userStats['involvementRate']);\n  //       setChannelsData(userStats['channelsJoined'].map((obj) => {\n  //         return { x: new Date(obj['timeStamp'] * 1000), y: obj['numChannelsJoined'] };\n  //       }));\n  //       setDmsData(userStats['dmsJoined'].map((obj) => {\n  //         return { x: new Date(obj['timeStamp'] * 1000), y: obj['numDmsJoined'] };\n  //       }));\n  //       setMessagesData(userStats['messagesSent'].map((obj) => {\n  //         return { x: new Date(obj['timeStamp'] * 1000), y: obj['numMessagesSent'] };\n  //       }));\n  //     })\n  //     .catch((err) => {\n  //       console.error(err);\n  //     })\n  // }, [token]);\n\n  return (\n    <>\n      <Typography variant=\"h5\">User statistics</Typography>\n      <p>Involvement rate: {(involvementRate * 100).toFixed(2)}%</p>\n      <Scatter\n        data={{\n          datasets: [\n            {\n              label: \"Channels joined\",\n              data: channelsData,\n              fill: false,\n              borderColor: \"#742774\",\n              showLine: true,\n            },\n            {\n              label: \"Dms joined\",\n              data: dmsData,\n              fill: false,\n              borderColor: \"#4287f5\",\n              showLine: true,\n            },\n            {\n              label: \"Messages sent\",\n              data: messagesData,\n              fill: false,\n              borderColor: \"#bd2d4f\",\n              showLine: true,\n            },\n          ]\n        }}\n        options={{\n          scales: {\n            xAxes: [{\n              title: \"time\",\n              type: 'time',\n              gridLines: {\n                lineWidth: 2\n              },\n              time: {\n                unitStepSize: 200,\n                displayFormats: {\n                  millisecond: 'MMM DD HH:mm',\n                  second: 'MMM DD HH:mm',\n                  minute: 'MMM DD HH:mm',\n                  hour: 'MMM DD HH:mm',\n                  day: 'MMM DD',\n                  week: 'MMM DD',\n                  month: 'MMM DD',\n                  quarter: 'MMM DD',\n                  year: 'MMM DD',\n                }\n              }\n            }]\n          }\n        }}\n      />\n    </>\n  );\n}\n\nexport default UserStats;\n","import {\n  List,\n  ListItem,\n  ListSubheader,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport axios from 'axios';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { extractUId } from '../../utils/token';\nimport EditableFields from './EditableFields';\nimport UserStats from './UserStats';\nimport Placeholder from '../Placeholder';\n\nfunction Profile({ profile }) {\n\n  const [loading, setLoading] = React.useState(true);\n  const [profileDetails, setProfileDetails] = React.useState({});\n  const token = React.useContext(AuthContext);\n  const uId = extractUId(token);\n\n  React.useEffect(() => {\n    axios\n      .get(`/user/profile/v2`, { params: { token, uId: profile } })\n      .then(({ data }) => {\n        console.log(data);\n        const { user } = data;\n        setProfileDetails(user);\n      })\n      .catch((err) => {\n        console.error(err);\n      })\n      .finally(() => setLoading(false));\n  }, [profile, token]);\n\n  function updateName(nameLast, nameFirst) {\n    axios\n      .put(`/user/profile/setname/v1`, { token, nameFirst, nameLast })\n      .then(() => {\n        console.log('all good');\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function updateEmail(email) {\n    axios\n      .put(`/user/profile/setemail/v1`, { token, email })\n      .then(() => {\n        console.log('all good');\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function updateProfileImgUrl(rawText) {\n    const items = rawText.split(',');\n    axios\n      .post(`/user/profile/uploadphoto/v1`, {\n        token,\n        imgUrl: items[0],\n        xStart: Number.parseInt(items[1]),\n        yStart: Number.parseInt(items[2]),\n        xEnd: Number.parseInt(items[3]),\n        yEnd: Number.parseInt(items[4]),\n      })\n      .then(() => {\n        console.log('all good');\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function updateHandle(handleStr) {\n    axios\n      .put(`/user/profile/sethandle/v1`, { token, handleStr })\n      .then(() => {\n        console.log('all good');\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  const editable = uId.toString() === profile;\n\n  return (\n    <>\n      <Typography variant=\"h4\">Profile</Typography>\n      {loading\n        ? <Placeholder />\n        : <List subheader={<ListSubheader>Profile Details</ListSubheader>}>\n          <ListItem key={'name'}>\n            <EditableFields\n              editable={editable}\n              masterValue={profileDetails.nameLast}\n              slaveValues={[profileDetails.nameFirst]}\n              master={(passedProps) => (\n                <TextField label={'Last Name'} {...passedProps} />\n              )}\n              slaves={[\n                (passedProps) => (\n                  <TextField label={'First Name'} {...passedProps} />\n                ),\n              ]}\n              onSave={updateName}\n            />\n          </ListItem>\n          <ListItem key={'email'}>\n            <EditableFields\n              editable={editable}\n              masterValue={profileDetails.email}\n              master={(passedProps) => (\n                <TextField label={'Email'} {...passedProps} />\n              )}\n              onSave={updateEmail}\n            />\n          </ListItem>\n          <ListItem key={'handle'}>\n            <EditableFields\n              editable={editable}\n              masterValue={profileDetails.handleStr}\n              master={(passedProps) => (\n                <TextField label={'Handle'} {...passedProps} />\n              )}\n              onSave={updateHandle}\n            />\n          </ListItem>\n          <ListItem key={'imgUrl'}>\n            <EditableFields\n              editable={editable}\n              masterValue={profileDetails.profileImgUrl}\n              master={(passedProps) => (\n                <TextField label={'imgUrl,x1,y1,x2,y2'} {...passedProps} />\n              )}\n              onSave={updateProfileImgUrl}\n            />\n          </ListItem>\n          <br />\n          <div>\n            NOTE: The final field input is to set a profile image. Please enter the 5 components (image url,\n            xStart, yStart, xEnd, yEnd) separated by commas.\n          </div>\n        </List>\n      }\n      <br />\n      {editable && <UserStats />}\n    </>\n  );\n}\n\nexport default Profile;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport Profile from '../components/Profile';\n\nfunction ProfilePage({ match }) {\n  const { profile } = match.params;\n  return (\n    <Layout\n      menu={<ProfileChannelLists />}\n      body={<Profile profile={profile} />}\n    />\n  );\n}\n\nexport default ProfilePage;","import {\n  Typography, List, ListSubheader,\n} from '@material-ui/core';\nimport axios from 'axios';\nimport React from 'react';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport AuthContext from '../../AuthContext';\nimport Message from '../Message';\n\nfunction Search({ queryStr, ...props }) {\n\n  const [loading, setLoading] = React.useState(true);\n  const [messages, setMessages] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  function performSearch() {\n    axios\n      .get('/search/v1', {\n        params: {\n          token,\n          queryStr,\n        },\n      })\n      .then(({ data }) => {\n        const { messages } = data;\n        if (typeof messages !== \"undefined\" && !Array.isArray(messages)) return;\n        setMessages(messages);\n        setLoading(false);\n      })\n      .catch((err) => {\n        setLoading(false);\n      });\n  }\n\n  // Only perform search if there is a query\n  React.useEffect(() => {\n    if (queryStr !== \"\") performSearch();\n  }, [token, queryStr])\n\n  // If there is no query\n  if (queryStr === \"\") {\n    return <>\n      <Typography variant=\"h4\" style={{ marginBottom: 10 }}>Search</Typography>\n      <Typography variant=\"h6\">Enter a query in the search bar above</Typography>\n    </>\n  }\n\n  // If there is a query\n  return <>\n    <Typography variant=\"h4\" style={{ marginBottom: 10 }}>Search Results</Typography>\n    {(loading) ?\n      <LinearProgress />\n      :\n      (messages.length == 0) ?\n        <Typography variant=\"h6\">Your search did not return any results</Typography>\n        :\n        <List\n          subheader={<ListSubheader>Messages</ListSubheader>}\n          style={{ width: '100%' }}\n        >\n          {messages.slice().reverse().map((message) => (\n            <Message key={message.messageId} {...message} />\n          ))}\n        </List>\n    }\n  </>\n}\n\nexport default Search;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport Search from '../components/Search';\n\nfunction SearchPage({ match }) {\n  const { queryStr = \"\" } = match.params;\n  return (\n    <Layout\n      menu={<ProfileChannelLists />}\n      body={<Search queryStr={queryStr} />}\n    />\n  );\n}\n\nexport default SearchPage;\n","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport AuthContext from '../../AuthContext';\n\nfunction ProtectedRoute(props) {\n  const token = React.useContext(AuthContext);\n  console.log(token);\n  if (!token) {\n    return <Redirect to=\"/login\" />;\n  }\n  return <Route {...props} />;\n}\n\nexport default ProtectedRoute;\n","import axios from 'axios';\n// import qs from 'qs';\nimport _ from 'lodash';\n\nimport { url } from './utils/constants';\nimport { DEFAULT_ERROR_TEXT } from './utils/text';\nimport { toast } from 'react-toastify';\n\naxios.defaults.baseURL = url;\naxios.defaults.headers.put['Content-Type'] = 'application/json';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\naxios.defaults.headers.delete['Content-Type'] = 'application/json';\n\n// temporarily cancel all requests until backend is ready\nconst CancelToken = axios.CancelToken;\n\naxios.interceptors.request.use((request) => {\n    // if (request.method === 'put' || request.method === 'post' || request.method === 'delete') {\n    //     request.data = qs.stringify(request.data);\n    // }\n    return request;\n});\n\nconst errorHandler = (error) => {\n    // great gist https://gist.github.com/saqueib/a495af17d7c0e2fd5c2316b0822ebac3\n\n    // if has response show the error\n    console.error(error);\n\n    let message = DEFAULT_ERROR_TEXT;\n\n    if (error.response) {\n        const found = typeof error.response.data === 'string'\n            && error.response.data.match(/<p>(.*)<\\/p>/);\n        const responseMessage = found && found.length > 1 && found[1];\n        message = _.get(error, 'response.data.message') || responseMessage || DEFAULT_ERROR_TEXT;\n    }\n\n    toast.error(message);\n\n    return Promise.reject({ ...error })\n}\n\nconst responseHandler = (response) => {\n    if ('error' in response) {\n        toast.error(DEFAULT_ERROR_TEXT);\n        return Promise.reject();\n    }\n\n    return response;\n}\n\naxios.interceptors.response.use(responseHandler, errorHandler);\n","// General POST error\nexport const DEFAULT_ERROR_TEXT = 'An error occured. Try again later';\n\n// Specific GET errors (deprecated)\nexport const CHANNEL_ERROR_TEXT = 'Unable to retrieve channel information';\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n\nimport './App.css';\n\nimport HomePage from './pages/HomePage';\nimport ChannelPage from './pages/ChannelPage';\nimport DmPage from './pages/DmPage';\nimport LoginPage from './pages/LoginPage';\nimport RegisterPage from './pages/RegisterPage';\nimport ForgotPasswordPage from './pages/ForgotPasswordPage';\nimport ResetPasswordPage from './pages/ResetPasswordPage';\nimport ProfilePage from './pages/ProfilePage';\nimport SearchPage from './pages/SearchPage';\n\nimport ProtectedRoute from './components/Layout/ProtectedRoute';\n\nimport { AuthProvider } from './AuthContext';\nimport './axios';\n\nfunction App() {\n  document.title = 'UNSW Treats';\n\n  const [authDetails, setAuthDetails] = React.useState(\n    localStorage.getItem('token')\n  );\n\n  function setAuth(token, uId) {\n    localStorage.setItem('token', token);\n    localStorage.setItem('uId', uId);\n    setAuthDetails(token);\n  }\n  return (\n    <AuthProvider value={authDetails}>\n      <Router>\n        <Switch>\n          <Route\n            exact\n            path=\"/login\"\n            render={(props) => {\n              return <LoginPage {...props} setAuth={setAuth} />;\n            }}\n          />\n          <Route\n            exact\n            path=\"/register\"\n            render={(props) => {\n              return <RegisterPage {...props} setAuth={setAuth} />;\n            }}\n          />\n          <Route exact path=\"/forgot_password\" component={ForgotPasswordPage} />\n          <Route exact path=\"/reset_password\" component={ResetPasswordPage} />\n          <ProtectedRoute exact path=\"/\" component={HomePage} />\n          <ProtectedRoute path=\"/profile/:profile\" component={ProfilePage} />\n          <ProtectedRoute path=\"/channel/:channelId\" component={ChannelPage} />\n          <ProtectedRoute path=\"/dm/:dmId\" component={DmPage} />\n          <ProtectedRoute path=\"/search/:queryStr\" component={SearchPage} />\n          <ProtectedRoute path=\"/search\" component={SearchPage} />\n        </Switch>\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import { red } from '@material-ui/core/colors';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n});\n\nexport default theme;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport theme from './theme';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport MomentUtils from '@date-io/moment';\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <MuiPickersUtilsProvider utils={MomentUtils}>\n      {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n      <CssBaseline />\n      <App />\n      <ToastContainer\n        position=\"top-center\"\n        autoClose={5000}\n        hideProgressBar={false}\n        newestOnTop\n        closeOnClick\n        rtl={false}\n        pauseOnVisibilityChange\n        draggable\n        pauseOnHover\n      />\n    </MuiPickersUtilsProvider>\n  </ThemeProvider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}